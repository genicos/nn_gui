var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,l;function a(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function u(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function c(t){return null==t?"":t}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function x(){return g(" ")}function v(){return g("")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function M(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function C(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function T(t,e,n){t.classList[n?"add":"remove"](e)}function P(t){l=t}function S(){if(!l)throw new Error("Function called outside component initialization");return l}const L=[],q=[],E=[],I=[],z=Promise.resolve();let A=!1;function R(t){E.push(t)}const F=new Set;let O=0;function N(){const t=l;do{for(;O<L.length;){const t=L[O];O++,P(t),D(t.$$)}for(P(null),L.length=0,O=0;q.length;)q.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];F.has(e)||(F.add(e),e())}E.length=0}while(L.length);for(;I.length;)I.pop()();A=!1,F.clear(),P(t)}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const U=new Set;let G;function B(t,e){t&&t.i&&(U.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),undefined.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function H(t){t&&t.c()}function j(t,n,r,i){const{fragment:l,on_mount:a,on_destroy:u,after_update:c}=t.$$;l&&l.m(n,r),i||R((()=>{const n=a.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(R)}function Y(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(L.push(t),A||(A=!0,z.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,s,r,i,a,u,c,f=[-1]){const p=l;P(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||p.$$.root};c&&c(d.root);let m=!1;if(d.ctx=r?r(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),m&&X(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();s.intro&&B(e.$$.fragment),j(e,s.target,s.anchor,s.customElement),N()}P(p)}class K{$destroy(){Y(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(t){let e,n,s,r,i,l,a,c,d,g,v;const b=t[5].default,w=function(t,e,n,o){if(t){const s=u(t,e,n,o);return t[0](s)}}(b,t,t[4],null);return{c(){e=m("div"),n=m("div"),s=y("svg"),r=y("circle"),i=y("line"),l=y("line"),a=x(),c=m("div"),w&&w.c(),$(r,"cx","6"),$(r,"cy","6"),$(r,"r","6"),$(i,"x1","3"),$(i,"y1","3"),$(i,"x2","9"),$(i,"y2","9"),$(i,"class","svelte-x94lxe"),$(l,"x1","9"),$(l,"y1","3"),$(l,"x2","3"),$(l,"y2","9"),$(l,"class","svelte-x94lxe"),$(s,"id","close"),$(s,"viewBox","0 0 12 12"),$(s,"class","svelte-x94lxe"),$(c,"id","modal-content"),$(c,"class","svelte-x94lxe"),$(n,"id","modal"),$(n,"class","svelte-x94lxe"),$(e,"id","topModal"),$(e,"class","svelte-x94lxe"),T(e,"visible",t[1])},m(o,u){var h;p(o,e,u),f(e,n),f(n,s),f(s,r),f(s,i),f(s,l),f(n,a),f(n,c),w&&w.m(c,null),t[7](e),d=!0,g||(v=[_(s,"click",t[6]),_(n,"click",(h=tt,function(t){return t.stopPropagation(),h.call(this,t)})),_(e,"click",t[8])],g=!0)},p(t,[n]){w&&w.p&&(!d||16&n)&&function(t,e,n,o,s,r){if(s){const i=u(e,n,o,r);t.p(i,s)}}(w,b,t,t[4],d?function(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}(b,t[4],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),2&n&&T(e,"visible",t[1])},i(t){d||(B(w,t),d=!0)},o(t){W(w,t),d=!1},d(n){n&&h(e),w&&w.d(n),t[7](null),g=!1,o(v)}}}const V={};function Z(t=""){return V[t]}const tt=()=>{};function et(t,e,n){let o,s,r,{$$slots:i={},$$scope:l}=e,a=!1,{id:u=""}=e;function c(t){"Escape"==t.key&&G==o&&f()}function f(t){a&&(window.removeEventListener("keydown",c),G=s,null==G&&(document.body.style.overflow=""),n(1,a=!1),r&&r(t))}var p;V[u]={open:function(t){r=t,a||(s=G,G=o,window.addEventListener("keydown",c),document.body.style.overflow="hidden",n(1,a=!0),document.body.appendChild(o))},close:f},p=()=>{delete V[u],window.removeEventListener("keydown",c)},S().$$.on_destroy.push(p);return t.$$set=t=>{"id"in t&&n(3,u=t.id),"$$scope"in t&&n(4,l=t.$$scope)},[o,a,f,u,l,i,()=>f(),function(t){q[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},()=>f()]}class nt extends K{constructor(t){super(),J(this,t,et,Q,r,{id:3})}}function ot(t,e,n){const o=t.slice();return o[14]=e[n],o}function st(t){let e,n,o,s,r,i=t[3],l=[];for(let e=0;e<i.length;e+=1)l[e]=ct(ot(t,i,e));return{c(){e=m("div"),n=m("div"),o=m("div"),s=g(t[1]),r=x();for(let t=0;t<l.length;t+=1)l[t].c();$(o,"class","legend"),$(o,"id",`label-${t[6]}`),$(n,"role","radiogroup"),$(n,"class","group-container svelte-1ufa5se"),$(n,"aria-labelledby",`label-${t[6]}`),M(n,"font-size",t[4]+"px"),$(n,"id",`group-${t[6]}`),$(e,"class","s s--multi svelte-1ufa5se")},m(t,i){p(t,e,i),f(e,n),f(n,o),f(o,s),f(n,r);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(t,e){if(2&e&&w(s,t[1]),73&e){let o;for(i=t[3],o=0;o<i.length;o+=1){const s=ot(t,i,o);l[o]?l[o].p(s,e):(l[o]=ct(s),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=i.length}16&e&&M(n,"font-size",t[4]+"px")},d(t){t&&h(e),d(l,t)}}}function rt(t){let e,n,o,s,r,i,l;return{c(){e=m("div"),n=m("span"),o=g(t[1]),s=x(),r=m("button"),$(n,"id",`switch-${t[6]}`),$(r,"role","switch"),$(r,"aria-checked",t[5]),$(r,"aria-labelledby",`switch-${t[6]}`),$(r,"class","svelte-1ufa5se"),$(e,"class","s s--slider svelte-1ufa5se"),M(e,"font-size",t[4]+"px")},m(a,u){p(a,e,u),f(e,n),f(n,o),f(e,s),f(e,r),i||(l=_(r,"click",t[7]),i=!0)},p(t,n){2&n&&w(o,t[1]),32&n&&$(r,"aria-checked",t[5]),16&n&&M(e,"font-size",t[4]+"px")},d(t){t&&h(e),i=!1,l()}}}function it(t){let e,n,o,s,r,i,l,a,u,c;return{c(){e=m("div"),n=m("span"),o=g(t[1]),s=x(),r=m("button"),i=m("span"),i.textContent="Tensorflow",l=x(),a=m("span"),a.textContent="Pytorch",$(n,"id",`switch-${t[6]}`),$(n,"class","svelte-1ufa5se"),$(i,"class","svelte-1ufa5se"),$(a,"class","svelte-1ufa5se"),$(r,"role","switch"),$(r,"aria-checked",t[5]),$(r,"aria-labelledby",`switch-${t[6]}`),$(r,"class","svelte-1ufa5se"),$(e,"class","s s--inner svelte-1ufa5se")},m(h,d){p(h,e,d),f(e,n),f(n,o),f(e,s),f(e,r),f(r,i),f(r,l),f(r,a),u||(c=_(r,"click",t[10]),u=!0)},p(t,e){2&e&&w(o,t[1]),32&e&&$(r,"aria-checked",t[5])},d(t){t&&h(e),u=!1,c()}}}function lt(t){let e,n,o,s,r,i,l,a,u,c;return{c(){e=m("div"),n=m("span"),o=g(t[1]),s=x(),r=m("button"),i=m("span"),i.textContent="None",l=x(),a=m("span"),a.textContent="Output",$(n,"id",`switch-${t[6]}`),$(n,"class","svelte-1ufa5se"),$(i,"class","svelte-1ufa5se"),$(a,"class","svelte-1ufa5se"),$(r,"role","switch"),$(r,"aria-checked",t[5]),$(r,"aria-labelledby",`switch-${t[6]}`),$(r,"class","svelte-1ufa5se"),$(e,"class","s s--inner svelte-1ufa5se")},m(h,d){p(h,e,d),f(e,n),f(n,o),f(e,s),f(e,r),f(r,i),f(r,l),f(r,a),u||(c=_(r,"click",t[9]),u=!0)},p(t,e){2&e&&w(o,t[1]),32&e&&$(r,"aria-checked",t[5])},d(t){t&&h(e),u=!1,c()}}}function at(t){let e,n,o,s,r,i,l,a,u,c;return{c(){e=m("div"),n=m("span"),o=g(t[1]),s=x(),r=m("button"),i=m("span"),i.textContent="None",l=x(),a=m("span"),a.textContent="Input",$(n,"id",`switch-${t[6]}`),$(n,"class","svelte-1ufa5se"),$(i,"class","svelte-1ufa5se"),$(a,"class","svelte-1ufa5se"),$(r,"role","switch"),$(r,"aria-checked",t[5]),$(r,"aria-labelledby",`switch-${t[6]}`),$(r,"class","svelte-1ufa5se"),$(e,"class","s s--inner svelte-1ufa5se")},m(h,d){p(h,e,d),f(e,n),f(n,o),f(e,s),f(e,r),f(r,i),f(r,l),f(r,a),u||(c=_(r,"click",t[8]),u=!0)},p(t,e){2&e&&w(o,t[1]),32&e&&$(r,"aria-checked",t[5])},d(t){t&&h(e),u=!1,c()}}}function ut(t){let e,n,o,s,r,i,l,a,u,c;return{c(){e=m("div"),n=m("span"),o=g(t[1]),s=x(),r=m("button"),i=m("span"),i.textContent="on",l=x(),a=m("span"),a.textContent="off",$(n,"id",`switch-${t[6]}`),$(n,"class","svelte-1ufa5se"),$(i,"class","svelte-1ufa5se"),$(a,"class","svelte-1ufa5se"),$(r,"role","switch"),$(r,"aria-checked",t[5]),$(r,"aria-labelledby",`switch-${t[6]}`),$(r,"class","svelte-1ufa5se"),$(e,"class","s s--inner svelte-1ufa5se")},m(h,d){p(h,e,d),f(e,n),f(n,o),f(e,s),f(e,r),f(r,i),f(r,l),f(r,a),u||(c=_(r,"click",t[7]),u=!0)},p(t,e){2&e&&w(o,t[1]),32&e&&$(r,"aria-checked",t[5])},d(t){t&&h(e),u=!1,c()}}}function ct(t){let e,n,o,s,r,i,l,a,u,c,d=t[14]+"";return{c(){e=m("input"),s=x(),r=m("label"),i=g(d),l=x(),$(e,"type","radio"),$(e,"id",n=`${t[14]}-${t[6]}`),e.__value=o=t[14],e.value=e.__value,$(e,"class","svelte-1ufa5se"),t[12][0].push(e),$(r,"for",a=`${t[14]}-${t[6]}`),$(r,"class","svelte-1ufa5se")},m(n,o){p(n,e,o),e.checked=e.__value===t[0],p(n,s,o),p(n,r,o),f(r,i),f(r,l),u||(c=_(e,"change",t[11]),u=!0)},p(t,s){8&s&&n!==(n=`${t[14]}-${t[6]}`)&&$(e,"id",n),8&s&&o!==(o=t[14])&&(e.__value=o,e.value=e.__value),1&s&&(e.checked=e.__value===t[0]),8&s&&d!==(d=t[14]+"")&&w(i,d),8&s&&a!==(a=`${t[14]}-${t[6]}`)&&$(r,"for",a)},d(n){n&&h(e),t[12][0].splice(t[12][0].indexOf(e),1),n&&h(s),n&&h(r),u=!1,c()}}}function ft(e){let n;function o(t,e){return"inner"==t[2]?ut:"I"==t[2]?at:"O"==t[2]?lt:"code"==t[2]?it:"slider"==t[2]?rt:st}let s=o(e),r=s(e);return{c(){r.c(),n=v()},m(t,e){r.m(t,e),p(t,n,e)},p(t,[e]){s===(s=o(t))&&r?r.p(t,e):(r.d(1),r=s(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&h(n)}}}function pt(t,e,n){let{label:o}=e,{design:s="inner label"}=e,{options:r=[]}=e,{fontSize:i=16}=e,{value:l="None"}=e,a=!0;const u=Math.floor(100*Math.random());return t.$$set=t=>{"label"in t&&n(1,o=t.label),"design"in t&&n(2,s=t.design),"options"in t&&n(3,r=t.options),"fontSize"in t&&n(4,i=t.fontSize),"value"in t&&n(0,l=t.value)},[l,o,s,r,i,a,u,function(t){const e=t.target.getAttribute("aria-checked");n(5,a="true"!==e),n(0,l=!0===a?"on":"off")},function(t){const e=t.target.getAttribute("aria-checked");n(5,a="true"!==e),n(0,l=!0===a?"None":"Input")},function(t){const e=t.target.getAttribute("aria-checked");n(5,a="true"!==e),n(0,l=!0===a?"None":"Output")},function(t){const e=t.target.getAttribute("aria-checked");n(5,a="true"!==e),n(0,l=!0===a?"Tensorflow":"Pytorch")},function(){l=this.__value,n(0,l)},[[]]]}class ht extends K{constructor(t){super(),J(this,t,pt,ft,r,{label:1,design:2,options:3,fontSize:4,value:0})}}class dt{constructor(){this.tensors=[],this.operators=[],this.input_tensors=[],this.param_tensors=[],this.output_tensors=[],this.truth_tensors=[],this.loss=null}add_tensor(t){return this.tensors.push(t),this.tensors.length-1}add_operator(t){var e=t.clone();this.operators.push(e);for(let t=0;t<e.inputs.length;t++)this.tensors[e.inputs[t]].input_to.push(this.operators.length-1);for(let t=0;t<e.outputs.length;t++)this.tensors[e.outputs[t]].output_of=this.operators.length-1;return this.operators.length-1}update_tensors(){for(let t=0;t<this.tensors.length;t++)this.tensors[t].input_to=[],this.tensors[t].output_of=null;for(let t=0;t<this.operators.length;t++){for(let e=0;e<this.operators[t].inputs.length;e++)this.tensors[this.operators[t].inputs[e]].input_to.push(t);for(let e=0;e<this.operators[t].outputs.length;e++)this.tensors[this.operators[t].outputs[e]].output_of=t}}expand(){for(let l=0;l<this.operators.length;l++)if(0==this.operators[l].func&&this.operators[l].network){var t=this.operators[l].network;t.expand();var e=this.operators[l],n=this.operators.length;this.operators[l]=t.operators[0];for(let e=1;e<t.operators.length;e++)this.add_operator(t.operators[e]);for(let a=0;a<t.tensors.length;a++){var o=a;if(t.input_tensors.includes(a)){var s=t.input_tensors.indexOf(a);o=e.inputs[s]}else if(t.output_tensors.includes(a)){s=t.output_tensors.indexOf(a);o=e.outputs[s]}else this.add_tensor(t.tensors[a]),o=this.tensors.length-1;for(let e=0;e<t.tensors[a].input_to.length;e++){var r=t.tensors[a].input_to[e],i=t.operators[r].inputs.indexOf(a);0==r?this.operators[l].inputs[i]=o:this.operators[r+n-1].inputs[i]=o}if(t.tensors[a].output_of||0==t.tensors[a].output_of){r=t.tensors[a].output_of,i=t.operators[r].outputs.indexOf(a);0==r?this.operators[l].outputs[i]=o:this.operators[r+n-1].outputs[i]=o}}this.update_tensors()}}to_string(){var t="";t+="Tensors: \n";for(let e=0;e<this.tensors.length;e++){t+="\t"+e+":\n",this.tensors[e].form&&(t+="\t\tform: "+String(this.tensors[e].form)+"\n"),t+="\t\tinput_to:\n";for(let n=0;n<this.tensors[e].input_to.length;n++)t+="\t\t\t"+this.tensors[e].input_to[n]+"\n";t+="\t\toutput_of\n",t+="\t\t\t"+this.tensors[e].output_of+"\n"}t+="Operators: \n";for(let e=0;e<this.operators.length;e++){t+="\t"+e+":\n",t+="\t\tinputs:\n";for(let n=0;n<this.operators[e].inputs.length;n++)t+="\t\t\t"+this.operators[e].inputs[n]+"\n";t+="\t\toutputs:\n";for(let n=0;n<this.operators[e].outputs.length;n++)t+="\t\t\t"+this.operators[e].outputs[n]+"\n";t+="\t\tfunc: "+this.operators[e].func+"\n"}t+="input_tensors:\n";for(let e=0;e<this.input_tensors.length;e++)t+="\t"+this.input_tensors[e]+"\n";t+="param_tensors:\n";for(let e=0;e<this.param_tensors.length;e++)t+="\t"+this.param_tensors[e]+"\n";t+="output_tensors:\n";for(let e=0;e<this.output_tensors.length;e++)t+="\t"+this.output_tensors[e]+"\n";return t}}class mt{constructor(t,e){this.scalar=!1,this.live=t||!1,this.form=e||[],this.x=0,this.y=0,this.tx=0,this.ty=0,this.selected=!1,this.input_to=[],this.output_of=null}calc_size(){if(this.form){var t=1;for(let e=0;e<this.form.length;e++)t*=this.form[e];this.size=t}else this.size=0;return this.size}}class yt{constructor(t,e,n){this.name=t,this.num_inputs=e,this.type=n}calc_form(t,e){var n=[];switch(console.log(this.name),this.name){case"identity":case"add":case"subtract":case"scale":case"softmax":case"hardmax":case"ReLU":case"LeakyReLU":case"Leaky to ReLU":n.push(e.tensors[t[0]].form);break;case"full":var o=e.tensors[t[0]].form,s=e.tensors[t[1]].form,r=1;for(let t=0;t<o.length;t++)r*=o[t];var i=1;for(let t=0;t<s.length;t++)i*=s[t];(l=[]).push(i/r),n.push(l);break;case"amass":case"max":(l=[]).push(1),n.push(l);break;case"convolution":o=e.tensors[t[0]].form,s=e.tensors[t[1]].form;var l=[];for(let t=0;t<o.length;t++)s.length<=t?l.push(o[t]):l.push(o[t]-s[t]+1);n.push(l);break;case"squared dist":n.push([1])}return n}}class gt{constructor(t){this.inputs=[],this.outputs=[],this.func=t,this.size=null,this.network=null,this.highlighted=!1}clone(){var t=new gt(this.func);return t.inputs=[...this.inputs],t.outputs=[...this.outputs],t.network=this.network,t}}var xt=Array.apply(null,Array(12)).map((function(){}));xt[0]=new yt("abstraction",0,1),xt[1]=new yt("identity",1,0),xt[2]=new yt("add",2,1),xt[3]=new yt("subtract",2,1),xt[4]=new yt("scale",2,2),xt[5]=new yt("Fully Connected",2,2),xt[6]=new yt("amass",1,0),xt[7]=new yt("Softmax",1,0),xt[8]=new yt("hardmax",1,0),xt[9]=new yt("max",1,0),xt[10]=new yt("Convolution",2,2),xt[11]=new yt("squared dist",2,1),xt[12]=new yt("PReLU",1,0),xt[13]=new yt("LeakyReLU",1,0),xt[14]=new yt("Leaky to ReLU",1,0),xt[15]=new yt("MaxPool",1,0);const vt=10;function _t(t,e,n){var o={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4},s=t.operators[e],r=!1;for(let t=0;t<s.outputs.length;t++)s.outputs[t]==n&&(r=!0);var i=0;if(!r)for(let t=0;t<s.inputs.length;t++)s.inputs[t]==n&&(i=t);var l=t.tensors[s.inputs[0]],a=t.tensors[s.inputs[1]],u=t.tensors[s.outputs[0]];if(0==xt[s.func].type&&(r?o.x_min=l.x+40:o.x_max=u.x-40),1==xt[s.func].type)if(r){var c=Math.max(l.x,a.x);o.x_min=c+40}else 1==i?(o.x_max=u.x-40,o.y_max=l.y-20):(o.x_max=u.x-40,o.y_min=a.y+20);if(2==xt[s.func].type)if(r)o.x_min=a.x+20,o.y_min=a.y+20;else if(1==i){o.x_min=l.x+20,o.x_max=u.x-20;var f=Math.min(u.y,l.y);o.y_max=f-20}else o.x_max=a.x-20,o.y_min=a.y+20;return o}function bt(t,e,n,o,s,r=!1){t.tensors[e].x=n,t.tensors[e].y=o,r&&(t.tensors[e].x-=(t.tensors[e].x+vt)%20-vt,t.tensors[e].y-=(t.tensors[e].y+vt)%20-vt);for(let n=0;n<t.tensors[e].input_to.length;n++){let o=_t(t,t.tensors[e].input_to[n],e);s.x_min=Math.max(s.x_min,o.x_min),s.x_max=Math.min(s.x_max,o.x_max),s.y_min=Math.max(s.y_min,o.y_min),s.y_max=Math.min(s.y_max,o.y_max)}if(null!=t.tensors[e].output_of){let n=_t(t,t.tensors[e].output_of,e);s.x_min=Math.max(s.x_min,n.x_min),s.x_max=Math.min(s.x_max,n.x_max),s.y_min=Math.max(s.y_min,n.y_min),s.y_max=Math.min(s.y_max,n.y_max)}t.tensors[e].x<s.x_min&&(t.tensors[e].x=s.x_min),t.tensors[e].x>s.x_max&&(t.tensors[e].x=s.x_max),t.tensors[e].y<s.y_min&&(t.tensors[e].y=s.y_min),t.tensors[e].y>s.y_max&&(t.tensors[e].y=s.y_max)}function $t(t,e,n){var o=[];for(let s=0;s<t.tensors.length;s++)t.tensors[s].x-vt<e&&t.tensors[s].x+vt>e&&t.tensors[s].y-vt<n&&t.tensors[s].y+vt>n&&o.push(s);return o}function wt(t,e,n){var o=[];for(let p=0;p<t.operators.length;p++){var s=t.operators[p],r=t.tensors[s.inputs[0]],i=t.tensors[s.inputs[1]],l=t.tensors[s.outputs[0]],a=1e6,u=-1e6,c=1e6,f=-1e6;s.func<0||(0==xt[s.func].type&&(a=r.x+vt,u=l.x-vt,c=Math.min(r.y-vt,l.y-vt),f=Math.max(r.y+vt,l.y+vt)),2==xt[s.func].type&&(a=r.x+vt,u=l.x-vt,c=i.y+vt,f=Math.max(r.y+vt,l.y+vt)),1==xt[s.func].type&&(a=Math.min(r.x+vt,i.x+vt),u=l.x-vt,c=i.y-vt,f=r.y+vt),a<e&&u>e&&c<n&&f>n&&o.push(p))}return o}function kt(t,e){var n=t.tensors[e],o=n.input_to;n.input_to=[];for(let a=0;a<o.length;a++){var s=o[a],r=t.operators[s],i=t.tensors.length;t.add_tensor(new mt(!0));var l=r.inputs.findIndex((t=>t==e));r.inputs[l]=i,t.tensors[i].x=n.x+20,t.tensors[i].y=n.y,t.tensors[i].input_to=[s],t.tensors[i].output_of=null,t.tensors[i].live=!1}n.x-=20,n.live=!1}function Mt(t,e,n){if(t.tensors[e].live&&t.tensors[n].live)return void console.log("Both merged tensors are live, so don't do anything.");var o=!1,s=!1;for(let s=0;s<t.output_tensors.length;s++)if(t.output_tensors[s]==e||t.output_tensors[s]==n){if(o)return void console.log("Cant merge two outputs");o=!0}for(let o=0;o<t.input_tensors.length;o++)if(t.input_tensors[o]==e||t.input_tensors[o]==n){if(s)return void console.log("Cant merge two inputs");s=!0}if(o&&s)return void console.log("Cant merge, one is an input and one is an output");o&&t.output_tensors.splice(0,1),s&&t.input_tensors.splice(0,1);let r=t.tensors[e],i=t.tensors[n],l=n,a=e;if(null!=r.output_of&&null==i.output_of);else if(null!=i.output_of&&null==r.output_of){var u=i;i=r,r=u,l=e,a=n}else if(null!=r.output_of||null!=i.output_of)return void console.log("Error merging, only one input must have an output");if(i.input_to.length>0&&r.output_of==i.input_to[0])console.log("Error merging, these are input and output of the same function");else{if(i.input_to.length>0){let e=t.operators[i.input_to[0]].inputs.indexOf(l);t.operators[i.input_to[0]].inputs[e]=a}r.input_to=i.input_to,r.live=r.live||i.live,t.tensors[a].selected=!0,o?t.output_tensors.push(a):s&&t.input_tensors.push(a),function(t,e){for(let n=0;n<t.operators.length;n++){for(let o=0;o<t.operators[n].inputs.length;o++)t.operators[n].inputs[o]>e&&(t.operators[n].inputs[o]-=1);for(let o=0;o<t.operators[n].outputs.length;o++)t.operators[n].outputs[o]>e&&(t.operators[n].outputs[o]-=1)}for(let n=0;n<t.input_tensors.length;n++)t.input_tensors[n]>e&&(t.input_tensors[n]-=1);for(let n=0;n<t.output_tensors.length;n++)t.output_tensors[n]>e&&(t.output_tensors[n]-=1);console.log("out",t.output_tensors),t.tensors.splice(e,1)}(t,l)}}var Ct,Tt,Pt=0,St=0;const Lt=10;var qt=!1,Et=-1,It=-1,zt=0,At=0,Rt=0,Ft=0,Ot=[];Ot.push(new dt);var Nt=!1,Dt=!0,Ut=100,Gt=100;class Bt{constructor(t){this.list_index=-1,this.y=t}}var Wt=[],Ht=[];function jt(){return Ot[0]}function Yt(t,e=140,n=60){se();let o=new gt;o.func=t;var s=Ot[0].tensors.length;0==xt[t].type&&(Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+0].x=e+0,Ot[0].tensors[s+0].y=n+0,Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+1].x=e+60,Ot[0].tensors[s+1].y=n+0,o.inputs=[s+0],o.outputs=[s+1]),2==xt[t].type&&(Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+0].x=e+0,Ot[0].tensors[s+0].y=n+40,Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+1].x=e+40,Ot[0].tensors[s+1].y=n+0,Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+2].x=e+80,Ot[0].tensors[s+2].y=n+40,o.inputs=[s+0,s+1],o.outputs=[s+2]),1==xt[t].type&&(Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+0].x=e+0,Ot[0].tensors[s+0].y=n+40,Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+1].x=e+0,Ot[0].tensors[s+1].y=n+0,Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[s+2].x=e+60,Ot[0].tensors[s+2].y=n+20,o.inputs=[s+0,s+1],o.outputs=[s+2]),Ot[0].add_operator(o)}CanvasRenderingContext2D.prototype.roundRect=function(t,e,n,o,s){return n<0&&(t-=n=-n),o<0&&(e-=o=-o),n<2*s&&(s=n/2),o<2*s&&(s=o/2),this.beginPath(),this.moveTo(t+s,e),this.arcTo(t+n,e,t+n,e+o,s),this.arcTo(t+n,e+o,t,e+o,s),this.arcTo(t,e+o,t,e,s),this.arcTo(t,e,t+n,e,s),this.closePath(),this};var Xt=[],Jt=new class{constructor(t,e,n,o,s=!1){this.x=t,this.y=e,this.w=n,this.h=o,this.bool=s}press(t,e){this.x<=t&&this.x+this.w>=t&&this.y<=e&&this.y+this.h>=e&&(this.bool=!this.bool)}}(110,10,20,20,!0);Xt.push(Jt);var Kt=new Image;function Qt(t,e,n,o){!function(t,e){var n=Ot[0].tensors[t];n.form=e,n.calc_size(),n.live=!0;for(let e=0;e<n.input_to.length;e++)Vt(n.input_to[e],t,!0);null!=n.output_of&&Vt(n.output_of,t,!1)}(e=n?Ot[0].operators[t].inputs[e]:Ot[0].operators[t].outputs[e],o)}function Vt(t,e,n){if(null!=t){var o=0,s=Ot[0].operators[t];if(Ot[0].tensors[e],n)for(let t=0;t<s.inputs.length;t++)s.inputs[t]==e&&(o=t);else for(let t=0;t<s.outputs.length;t++)s.outputs[t]==e&&(o=t);var r,i=Ot[0].tensors[s.inputs[0]],l=Ot[0].tensors[s.outputs[0]];switch(s.inputs.length>1&&(r=Ot[0].tensors[s.inputs[1]]),s.func){case 5:if(n)if(0==o){if(l.live)r.form=[i.size,l.size],r.live=!0,r.calc_size(),Vt(r.output_of,s.inputs[1],!1);else if(r.live){l.form=[r.form[1]],l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}}else{i.form=[r.form[0]],i.live=!0,i.calc_size(),Vt(i.output_of,s.inputs[0],!1),l.form=[r.form[1]],l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}else i.live&&(r.form=[i.size,l.size],r.live=!0,r.calc_size(),Vt(r.output_of,s.inputs[1],!1));break;case 7:if(n){l.form=i.form,l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}else i.form=l.form,i.live=!0,i.calc_size(),Vt(i.output_of,s.inputs[0],!1);break;case 10:if(n){if(0==o){if(l.live)r.form=[i.form[0]-l.form[0]+1,i.form[1]-l.form[1]+1,l.form[2]],r.live=!0,r.calc_size(),Vt(r.output_of,s.inputs[1],!1);else if(r.live){l.form=[i.form[0]-r.form[0]+1,i.form[1]-r.form[1]+1,r.form[2]],l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}}else if(l.live)i.form=[r.form[0]+l.form[0]-1,r.form[1]+l.form[1]-1],i.live=!0,i.calc_size(),Vt(r.output_of,s.inputs[1],!1);else if(i.live){l.form=[i.form[0]-r.form[0]+1,i.form[1]-r.form[1]+1,r.form[2]],l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}}else i.live?(r.form=[i.form[0]-l.form[0]+1,i.form[1]-l.form[1]+1,l.form[2]],r.live=!0,r.calc_size(),Vt(r.output_of,s.inputs[1],!1)):r.live&&(i.form=[r.form[0]+l.form[0]-1,r.form[1]+l.form[1]-1],i.live=!0,i.calc_size(),Vt(r.output_of,s.inputs[1],!1));break;case 12:if(n){l.form=i.form,l.live=!0,l.calc_size();for(let t=0;t<l.input_to;t++)Vt(l.input_to[t],s.outputs[0],!0)}else i.form=l.form,i.live=!0,i.calc_size(),Vt(i.output_of,s.inputs[0],!1)}}}function Zt(){(Ct=document.getElementById("gui_canvas")).addEventListener("mousedown",ae,!1),Ct.addEventListener("mousemove",ue,!1),Ct.addEventListener("mouseup",le,!1),Ct.addEventListener("dblclick",ie,!1),Tt=Ct.getContext("2d"),Ct.width=Ct.getBoundingClientRect().width,Ct.height=Ct.getBoundingClientRect().height,Pt=Ct.width,function(t,e=null){null==e&&(e=Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[e].y=t,Ot[0].tensors[e].x=120,Ot[0].input_tensors.push(e));var n=new Bt(t);for(let t=0;t<Ot[0].input_tensors.length;t++)Ot[0].input_tensors[t]==e&&(n.list_index=t);Wt.push(n)}((St=Ct.height)/2-St/2%20),function(t,e=null){null==e&&(e=Ot[0].add_tensor(new mt(!1)),Ot[0].tensors[e].y=t,Ot[0].tensors[e].x=Pt-Gt-20-(Pt-Gt-20)%20,Ot[0].output_tensors.push(e));var n=new Bt(t);for(let t=0;t<Ot[0].output_tensors.length;t++)Ot[0].output_tensors[t]==e&&(n.list_index=t);Ht.push(n)}(St/2-St/2%20),window.requestAnimationFrame(oe)}function te(t,e){let n=t.tensors[e];var o=!1,s=!1;for(let n=0;n<t.input_tensors.length;n++)t.input_tensors[n]==e&&(o=!0);for(let n=0;n<t.output_tensors.length;n++)t.output_tensors[n]==e&&(s=!0);n.live?(Tt.fillStyle=o?"#F2C8A6":s?"#A6D0F2":"#FFFFFF",Tt.lineWidth=1,Tt.setLineDash([]),Tt.strokeStyle="black"):(Tt.fillStyle="rgba(255,255,255,0)",Tt.lineWidth=1,Tt.setLineDash([3,4]),Tt.strokeStyle="Grey",Tt.strokeStyle=o?"#F2C8A6":s?"#A6D0F2":"#888888"),Tt.beginPath(),n.scalar?Tt.rect(n.x-scalarTensorRadius,n.y-scalarTensorRadius,2*scalarTensorRadius,2*scalarTensorRadius):Tt.rect(n.x-Lt,n.y-Lt,20,20),Tt.fill(),Tt.stroke(),n.selected&&(Tt.fillStyle="rgba(255,255,255,0)",Tt.lineWidth=1,Tt.strokeStyle="#5dd2f0",Tt.setLineDash([]),Tt.beginPath(),Tt.roundRect(n.x-15,n.y-15,30,30,2),Tt.stroke())}function ee(t,e,n,o,s,r,i,l,a,u){if(!(a<1)){var c=1/(a*u+(a-1)*(1-u));Tt.beginPath(),Tt.moveTo(t,e),Tt.lineTo(s,r),Tt.lineTo(s+(i-s)*(0*c+u*c),r+(l-r)*(0*c+u*c)),Tt.lineTo(t+(n-t)*(0*c+u*c),e+(o-e)*(0*c+u*c));for(let f=1;f<a;f++)Tt.lineTo(t+f*c*(n-t),e+f*c*(o-e)),Tt.lineTo(s+f*c*(i-s),r+f*c*(l-r)),Tt.lineTo(s+(i-s)*(f*c+u*c),r+(l-r)*(f*c+u*c)),Tt.lineTo(t+(n-t)*(f*c+u*c),e+(o-e)*(f*c+u*c));Tt.closePath(),Tt.fill()}}function ne(t,e){let n,o,s,r,i=t.operators[e],l=Tt.createLinearGradient(0,0,Pt,0);switch(i.highlighted?(l.addColorStop(0,"#E5914D"),l.addColorStop(1,"#4DA1E5")):(l.addColorStop(0,"#DE7521"),l.addColorStop(1,"#218ADE")),Tt.fillStyle=l,i.func){case 0:case 1:case 4:case 6:case 8:case 9:case 11:break;case 2:o=t.tensors[i.inputs[0]],s=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(r.x-Lt,r.y-Lt),Tt.lineTo(r.x-Lt,r.y+Lt),Tt.lineTo(o.x+Lt,o.y+Lt),Tt.lineTo(o.x+Lt,o.y-Lt),Tt.closePath(),Tt.fill(),Tt.beginPath(),Tt.moveTo(r.x-Lt,r.y-Lt),Tt.lineTo(r.x-Lt,r.y+Lt),Tt.lineTo(s.x+Lt,s.y+Lt),Tt.lineTo(s.x+Lt,s.y-Lt),Tt.closePath(),Tt.fill();break;case 3:o=t.tensors[i.inputs[0]],s=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]];break;case 5:o=t.tensors[i.inputs[0]],s=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(r.x-Lt,r.y-Lt),Tt.lineTo(r.x-Lt,r.y+Lt),Tt.lineTo(o.x+Lt,o.y+Lt),Tt.lineTo(o.x+Lt,o.y-Lt),Tt.lineTo(s.x-Lt,s.y+Lt),Tt.lineTo(s.x+Lt,s.y+Lt),Tt.closePath(),Tt.fill();break;case 7:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(r.x-Lt,r.y-5),Tt.lineTo(r.x-Lt,r.y+5),Tt.lineTo(n.x+Lt,n.y+Lt),Tt.lineTo(n.x+Lt,n.y-Lt),Tt.closePath(),Tt.fill();break;case 10:o=t.tensors[i.inputs[0]],s=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(o.x+Lt,o.y-Lt),Tt.lineTo(s.x-Lt,s.y+Lt),Tt.lineTo(s.x+Lt,s.y+Lt),Tt.lineTo(r.x-Lt,r.y-Lt),Tt.closePath(),Tt.fill(),ee(o.x+Lt,o.y-Lt-1,o.x+Lt,o.y+Lt,r.x-Lt,r.y-Lt-1,r.x-Lt,r.y+Lt,3,.6);break;case 12:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(n.x+Lt,n.y-Lt),Tt.lineTo((r.x+n.x)/2,(r.y+n.y)/2-Lt),Tt.lineTo((r.x+n.x)/2,(r.y+n.y)/2+Lt),Tt.lineTo(n.x+Lt,n.y+Lt),Tt.closePath(),Tt.fill(),ee((r.x+n.x)/2,(r.y+n.y)/2-Lt,(r.x+n.x)/2,(r.y+n.y)/2+Lt,r.x-Lt,r.y-Lt,r.x-Lt,r.y+Lt,3,.5);break;case 15:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],Tt.beginPath(),Tt.moveTo(n.x+Lt,n.y-Lt),Tt.lineTo(r.x-Lt,r.y-Lt),Tt.lineTo(r.x-Lt,r.y),Tt.lineTo(n.x+Lt+.6*(r.x-Lt-n.x-Lt),(n.y+r.y)/2),Tt.lineTo(n.x+Lt+.4*(r.x-Lt-n.x-Lt),(n.y+r.y)/2+Lt),Tt.lineTo(n.x+Lt,n.y+Lt),Tt.closePath(),Tt.fill()}}function oe(){if(Ct.width=Ct.getBoundingClientRect().width,Ct.height=Ct.getBoundingClientRect().height,Pt=Ct.width,St=Ct.height,Dt){Tt.beginPath();for(let t=-10;t<Pt;t+=20)Tt.moveTo(t,0),Tt.lineTo(t,St);for(let t=-10;t<St;t+=20)Tt.moveTo(0,t),Tt.lineTo(Pt,t);Tt.lineWidth=.5,Tt.setLineDash([1,4]),Tt.strokeStyle="Grey",Tt.closePath(),Tt.stroke()}for(let t=0;t<Ot[0].operators.length;t++)ne(Ot[0],t);for(let e=0;e<Ot[0].tensors.length;e++)if(te(Ot[0],e),Ot[0].tensors[e].selected&&!Nt&&qt){var t={x_min:120,x_max:Ct.width-20-Gt-Ct.width%20,y_min:20,y_max:Ct.height-20-(Ct.height-20)%Lt*2};bt(Ot[0],e,Ot[0].tensors[e].tx+zt-Rt,Ot[0].tensors[e].ty+At-Ft,t,Dt)}Nt&&(Tt.fillStyle="rgba(255,255,255,0)",Tt.lineWidth=1,Tt.strokeStyle="#5dd2f0",Tt.setLineDash([3,2]),Tt.beginPath(),Tt.roundRect(Rt,Ft,zt-Rt,At-Ft,2),Tt.stroke()),Dt=Xt[0].bool;try{Tt.drawImage(Kt,Xt[0].x,Xt[0].y,Xt[0].w,Xt[0].h)}catch(t){Tt.fillStyle="black",Tt.fillRect(Xt[0].x,Xt[0].y,Xt[0].w,Xt[0].h)}Tt.fillStyle="#E0E0E0",Tt.fillRect(0,0,Ut,St+20);for(let t=0;t<Wt.length;t++){Tt.fillStyle="#F2C8A6",Tt.roundRect(10,Wt[t].y-30,80,60,Lt),Tt.fill();var e=Ot[0].tensors[Ot[0].input_tensors[Wt[t].list_index]];Tt.lineWidth=1,Tt.strokeStyle="black",Tt.setLineDash([]),Tt.beginPath(),Tt.moveTo(90,Wt[t].y),Math.abs(Wt[t].y-e.y)<20?(Tt.lineTo(Ut-Math.abs(Wt[t].y-e.y)/2,Wt[t].y),Wt[t].y-e.y>0?(Tt.arc(Ut-Math.abs(Wt[t].y-e.y)/2,(Wt[t].y+e.y)/2,Math.abs(e.y-Wt[t].y)/2,Math.PI/2,0,!0),Tt.arc(Ut+Math.abs(Wt[t].y-e.y)/2,Wt[t].y-(Wt[t].y-e.y)/2,Math.abs(e.y-Wt[t].y)/2,Math.PI,3*Math.PI/2)):(Tt.arc(Ut-Math.abs(Wt[t].y-e.y)/2,(Wt[t].y+e.y)/2,Math.abs(e.y-Wt[t].y)/2,3*Math.PI/2,0),Tt.arc(Ut+Math.abs(Wt[t].y-e.y)/2,Wt[t].y-(Wt[t].y-e.y)/2,Math.abs(e.y-Wt[t].y)/2,Math.PI,Math.PI/2,!0)),Tt.lineTo(e.x-Lt,e.y)):(Wt[t].y-e.y>0?(Tt.arc(90,Wt[t].y-Lt,Lt,Math.PI/2,0,!0),Tt.arc(Ut+Math.min(Math.abs(Wt[t].y-e.y)/2,e.x-Lt-Ut),e.y+Math.min(Math.abs(e.y-Wt[t].y)/2,e.x-Lt-Ut),Math.min(Math.abs(e.y-Wt[t].y)/2,e.x-Lt-Ut),Math.PI,3*Math.PI/2)):(Tt.arc(90,Wt[t].y+Lt,Lt,3*Math.PI/2,0),Tt.arc(Ut+Math.min(Math.abs(Wt[t].y-e.y)/2,e.x-Lt-Ut),e.y-Math.min(Math.abs(e.y-Wt[t].y)/2,e.x-Lt-Ut),Math.min(Math.abs(e.y-Wt[t].y)/2,e.x-Lt-Ut),Math.PI,Math.PI/2,!0)),Tt.lineTo(e.x-Lt,e.y)),Tt.stroke()}Tt.fillStyle="#E0E0E0",Tt.fillRect(Pt-Gt,0,Pt,St+20);for(let t=0;t<Ht.length;t++){Tt.fillStyle="#A6D0F2",Tt.roundRect(Pt-Gt+10,Ht[t].y-30,80,60,Lt),Tt.fill();e=Ot[0].tensors[Ot[0].output_tensors[Ht[t].list_index]];Tt.lineWidth=1,Tt.strokeStyle="black",Tt.setLineDash([]),Tt.beginPath(),Tt.moveTo(Pt-Gt+10,Ht[t].y),Math.abs(Ht[t].y-e.y)<20?(Tt.lineTo(Pt-Gt+Math.abs(Ht[t].y-e.y)/2,Ht[t].y),Ht[t].y-e.y>0?(Tt.arc(Pt-Gt+Math.abs(Ht[t].y-e.y)/2,(Ht[t].y+e.y)/2,Math.abs(e.y-Ht[t].y)/2,Math.PI/2,Math.PI),Tt.arc(Pt-Gt-Math.abs(Ht[t].y-e.y)/2,Ht[t].y-(Ht[t].y-e.y)/2,Math.abs(e.y-Ht[t].y)/2,0,-Math.PI/2,!0)):(Tt.arc(Pt-Gt+Math.abs(Ht[t].y-e.y)/2,(Ht[t].y+e.y)/2,Math.abs(e.y-Ht[t].y)/2,3*Math.PI/2,Math.PI,!0),Tt.arc(Pt-Gt-Math.abs(Ht[t].y-e.y)/2,Ht[t].y-(Ht[t].y-e.y)/2,Math.abs(e.y-Ht[t].y)/2,0,Math.PI/2)),Tt.lineTo(e.x+Lt,e.y)):(Ht[t].y-e.y>0?(Tt.arc(Pt-Gt+Lt,Ht[t].y-Lt,Lt,Math.PI/2,Math.PI),Tt.arc(Pt-Gt-Math.min(Math.abs(Ht[t].y-e.y)/2,Pt-Gt-e.x-Lt),e.y+Math.min(Math.abs(e.y-Ht[t].y)/2,Pt-Gt-e.x-Lt),Math.min(Math.abs(e.y-Ht[t].y)/2,Pt-Gt-e.x-Lt),0,-Math.PI/2,!0)):(Tt.arc(Pt-Gt+Lt,Ht[t].y+Lt,Lt,3*Math.PI/2,Math.PI,!0),Tt.arc(Pt-Gt-Math.min(Math.abs(Ht[t].y-e.y)/2,Pt-Gt-e.x-Lt),e.y-Math.min(Math.abs(e.y-Ht[t].y)/2,Pt-Gt-e.x-Lt),Math.min(Math.abs(e.y-Ht[t].y)/2,Pt-Gt-e.x-Lt),0,Math.PI/2)),Tt.lineTo(e.x+Lt,e.y)),Tt.stroke()}window.requestAnimationFrame(oe)}function se(){for(let t=0;t<Ot[0].tensors.length;t++)Ot[0].tensors[t].selected=!1}function re(t){for(let t=0;t<Ot[0].operators.length;t++)Ot[0].operators[t].highlighted=!1;for(let e=0;e<t.length;e++)Ot[0].operators[t[e]].highlighted=!0}function ie(t){let e=$t(Ot[0],zt,At);for(let t=0;t<e.length;t++){var n=e[t],o=Ot[0].tensors[n];null==o.output_of||0==o.input_to.length||(console.log("Unmerge"),kt(Ot[0],n))}}function le(t){Nt=!1;for(let t=0;t<Ot[0].tensors.length;t++)for(let o=0;o<Ot[0].tensors.length;o++)if(o!=t){var e=Ot[0].tensors[t],n=Ot[0].tensors[o];Math.abs(e.x-n.x)<20&&Math.abs(e.y-n.y)<20&&Mt(Ot[0],t,o)}qt=!1,Et=-1,It=-1;let o=$t(Ot[0],zt,At);o.length>=2&&Mt(Ot[0],o[0],o[1])}function ae(t){qt=!0;for(let t=0;t<Ot[0].tensors.length;t++)Ot[0].tensors[t].tx=Ot[0].tensors[t].x,Ot[0].tensors[t].ty=Ot[0].tensors[t].y;Rt=zt,Ft=At;let e=$t(Ot[0],zt,At);0!=e.length&&(Et=e[0],Ot[0].tensors[Et].selected=!0,console.log(Ot[0].tensors[Et].form),console.log(Et));let n=wt(Ot[0],zt,At);if(0!=n.length&&0==e.length){It=n[0];var o=Ot[0].operators[It];for(let t=0;t<o.inputs.length;t++)Ot[0].tensors[o.inputs[t]].selected=!0;for(let t=0;t<o.outputs.length;t++)Ot[0].tensors[o.outputs[t]].selected=!0}0==e.length&&0==n.length&&(Nt=!0,se());for(let t=0;t<Xt.length;t++)Xt[t].press(zt,At)}function ue(t){if(t.offsetX?(zt=t.offsetX,At=t.offsetY):t.layerX&&(zt=t.layerX,At=t.layerY),Nt)for(let t=0;t<Ot[0].tensors.length;t++){var e=Ot[0].tensors[t];Math.abs(e.x-(Rt+zt)/2)<Math.abs(Rt-(Rt+zt)/2)&&Math.abs(e.y-(Ft+At)/2)<Math.abs(Ft-(Ft+At)/2)?e.selected=!0:e.selected=!1}}function ce(t,e,n){const o=t.slice();return o[76]=e[n],o}function fe(t,e,n){const o=t.slice();return o[79]=e[n],o}function pe(t,e,n){const o=t.slice();return o[82]=e[n],o}function he(t){let e,n,s,r,i,l,u,d,y,v,b=t[82].operator_name+"";function k(){return t[36](t[82])}function C(){return t[38](t[82])}return{c(){e=m("li"),n=m("p"),s=m("img"),i=g(b),l=x(),a(s.src,r=Ne)||$(s,"src",r),$(s,"alt","Softmax List icon."),M(s,"max-height","20px"),M(s,"margin-right","10px"),$(e,"id",u="list_item"+t[82].id),$(e,"class",d=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")},m(o,r){p(o,e,r),f(e,n),f(n,s),f(n,i),f(e,l),y||(v=[_(e,"click",k),_(e,"focus",We),_(e,"mouseleave",t[37]),_(e,"mouseover",C)],y=!0)},p(n,o){t=n,1&o[0]&&b!==(b=t[82].operator_name+"")&&w(i,b),1&o[0]&&u!==(u="list_item"+t[82].id)&&$(e,"id",u),1&o[0]&&d!==(d=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")&&$(e,"class",d)},d(t){t&&h(e),y=!1,o(v)}}}function de(t){let e,n,s,r,i,l,u,d,y,v,b=t[82].operator_name+"";function k(){return t[33](t[82])}function C(){return t[35](t[82])}return{c(){e=m("li"),n=m("p"),s=m("img"),i=g(b),d=x(),a(s.src,r=Oe)||$(s,"src",r),$(s,"alt","PReLU List icon."),M(s,"max-height","20px"),M(s,"margin-right","10px"),$(e,"id",l="list_item"+t[82].id),$(e,"class",u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")},m(o,r){p(o,e,r),f(e,n),f(n,s),f(n,i),p(o,d,r),y||(v=[_(e,"click",k),_(e,"focus",Be),_(e,"mouseleave",t[34]),_(e,"mouseover",C)],y=!0)},p(n,o){t=n,1&o[0]&&b!==(b=t[82].operator_name+"")&&w(i,b),1&o[0]&&l!==(l="list_item"+t[82].id)&&$(e,"id",l),1&o[0]&&u!==(u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")&&$(e,"class",u)},d(t){t&&h(e),t&&h(d),y=!1,o(v)}}}function me(t){let e,n,s,r,i,l,u,d,y,v,b=t[82].operator_name+"";function k(){return t[30](t[82])}function C(){return t[32](t[82])}return{c(){e=m("li"),n=m("p"),s=m("img"),i=g(b),d=x(),a(s.src,r=Fe)||$(s,"src",r),$(s,"alt","Convolution List icon."),M(s,"max-height","20px"),M(s,"margin-right","10px"),$(e,"id",l="list_item"+t[82].id),$(e,"class",u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")},m(o,r){p(o,e,r),f(e,n),f(n,s),f(n,i),p(o,d,r),y||(v=[_(e,"click",k),_(e,"focus",Ge),_(e,"mouseleave",t[31]),_(e,"mouseover",C)],y=!0)},p(n,o){t=n,1&o[0]&&b!==(b=t[82].operator_name+"")&&w(i,b),1&o[0]&&l!==(l="list_item"+t[82].id)&&$(e,"id",l),1&o[0]&&u!==(u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")&&$(e,"class",u)},d(t){t&&h(e),t&&h(d),y=!1,o(v)}}}function ye(t){let e,n,s,r,i,l,u,d,y,v,b=t[82].operator_name+"";function k(){return t[27](t[82])}function C(){return t[29](t[82])}return{c(){e=m("li"),n=m("p"),s=m("img"),i=g(b),d=x(),a(s.src,r=Re)||$(s,"src",r),$(s,"alt","Fully Connected List icon."),M(s,"max-height","20px"),M(s,"margin-right","10px"),$(e,"id",l="list_item"+t[82].id),$(e,"class",u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")},m(o,r){p(o,e,r),f(e,n),f(n,s),f(n,i),p(o,d,r),y||(v=[_(e,"click",k),_(e,"focus",Ue),_(e,"mouseleave",t[28]),_(e,"mouseover",C)],y=!0)},p(n,o){t=n,1&o[0]&&b!==(b=t[82].operator_name+"")&&w(i,b),1&o[0]&&l!==(l="list_item"+t[82].id)&&$(e,"id",l),1&o[0]&&u!==(u=c("true"===t[82].hovered?"hovered":"")+" svelte-q8whf6")&&$(e,"class",u)},d(t){t&&h(e),t&&h(d),y=!1,o(v)}}}function ge(t){let e;function n(t,e){return"Fully Connected"===t[82].operator_type?ye:"Convolution"===t[82].operator_type?me:"PReLU"===t[82].operator_type?de:"Softmax"===t[82].operator_type?he:void 0}let o=n(t),s=o&&o(t);return{c(){s&&s.c(),e=v()},m(t,n){s&&s.m(t,n),p(t,e,n)},p(t,r){o===(o=n(t))&&s?s.p(t,r):(s&&s.d(1),s=o&&o(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s&&s.d(t),t&&h(e)}}}function xe(e){let n,s,r,i,l,a;return{c(){n=g("Are you sure?\n\t\t\n\t\t"),s=m("button"),s.textContent="Yes",r=x(),i=m("button"),i.textContent="No",$(s,"class","option"),$(i,"class","option")},m(t,o){p(t,n,o),p(t,s,o),p(t,r,o),p(t,i,o),l||(a=[_(s,"click",e[6]),_(i,"click",e[40])],l=!0)},p:t,d(t){t&&h(n),t&&h(s),t&&h(r),t&&h(i),l=!1,o(a)}}}function ve(e){let n,o,s,r,i=e[79].text+"";return{c(){n=m("option"),o=g(i),s=x(),n.__value=r=e[79],n.value=n.__value},m(t,e){p(t,n,e),f(n,o),f(n,s)},p:t,d(t){t&&h(n)}}}function _e(e){let n,o,s,r,i=e[76].text+"";return{c(){n=m("option"),o=g(i),s=x(),n.__value=r=e[76],n.value=n.__value},m(t,e){p(t,n,e),f(n,o),f(n,s)},p:t,d(t){t&&h(n)}}}function be(t){let e,n,s,r,i,l,a,u,c,y,v,k,T,P,S,L,E,z,A,R,F,O,N,D,U,G,X,J;function K(e){t[41](e)}let Q={label:"Code: ",design:"code"};void 0!==t[5]&&(Q.value=t[5]),l=new ht({props:Q}),q.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(l,"value",K)));let V=t[16],Z=[];for(let e=0;e<V.length;e+=1)Z[e]=ve(fe(t,V,e));let tt=t[18],et=[];for(let e=0;e<tt.length;e+=1)et[e]=_e(ce(t,tt,e));return{c(){e=g("How would you like to download your neural network? "),n=m("br"),s=m("br"),r=x(),i=m("form"),H(l.$$.fragment),u=x(),c=m("p"),y=g(t[5]),v=x(),k=m("p"),k.textContent="Select Loss Function:",T=x(),P=m("select");for(let t=0;t<Z.length;t+=1)Z[t].c();S=x(),L=m("p"),L.textContent=`${t[15]}`,E=m("br"),z=g(" --\x3e\n\t\t\t\n\t\t\t"),A=m("p"),A.textContent="Select Optimizer:",R=x(),F=m("select");for(let t=0;t<et.length;t+=1)et[t].c();O=x(),N=m("p"),N.textContent=`${t[17]}`,D=x(),U=m("button"),U.textContent="Generate",M(c,"color","red"),M(L,"color","red"),M(N,"color","red"),$(U,"type","submit")},m(o,a){p(o,e,a),p(o,n,a),p(o,s,a),p(o,r,a),p(o,i,a),j(l,i,null),f(i,u),f(i,c),f(c,y),f(i,v),f(i,k),f(i,T),f(i,P);for(let t=0;t<Z.length;t+=1)Z[t].m(P,null);C(P,t[15]),f(i,S),f(i,L),f(i,E),f(i,z),f(i,A),f(i,R),f(i,F);for(let t=0;t<et.length;t+=1)et[t].m(F,null);C(F,t[17]),f(i,O),f(i,N),f(i,D),f(i,U),G=!0,X||(J=[_(U,"click",t[42]),_(i,"submit",b(t[19]))],X=!0)},p(t,e){const n={};var o;if(!a&&32&e[0]&&(a=!0,n.value=t[5],o=()=>a=!1,I.push(o)),l.$set(n),(!G||32&e[0])&&w(y,t[5]),65536&e[0]){let n;for(V=t[16],n=0;n<V.length;n+=1){const o=fe(t,V,n);Z[n]?Z[n].p(o,e):(Z[n]=ve(o),Z[n].c(),Z[n].m(P,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=V.length}if(262144&e[0]){let n;for(tt=t[18],n=0;n<tt.length;n+=1){const o=ce(t,tt,n);et[n]?et[n].p(o,e):(et[n]=_e(o),et[n].c(),et[n].m(F,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}},i(t){G||(B(l.$$.fragment,t),G=!0)},o(t){W(l.$$.fragment,t),G=!1},d(t){t&&h(e),t&&h(n),t&&h(s),t&&h(r),t&&h(i),Y(l),d(Z,t),d(et,t),X=!1,o(J)}}}function $e(t){let e;return{c(){e=m("h1"),e.textContent="Tutorial"},m(t,n){p(t,e,n)},d(t){t&&h(e)}}}function we(t){let e,n,o;return{c(){e=m("h1"),e.textContent="About Neurula",n=x(),o=m("p"),o.innerHTML="Machine learning can appear obscure and complicated, posing a barrier to people who are unfamiliar but interested.<br/>\n\t\t\tHowever, designing working neural networks doesnâ€™t have to be difficult.<br/><br/>\n\t\t\tThat&#39;s why we created Neurula: a website in which you can drag and drop blocks allowing you to design\n\t\t\tneural networks in an intuitive fashion. Once you design a network, you can download auto-generated code that implements\n\t\t\tthat network in tensorflow or pytorch. <br/><br/> \n\t\t\t<i>Made for UCSC&#39;s CSE 115A Spring 2022</i><br/> \n\t\t\t<i>Developers: Nicolas Ayala, Anish Pahilajani, Kat Negrete, Mahesh Vegiraju, and Alexandra Hutchins</i>"},m(t,s){p(t,e,s),p(t,n,s),p(t,o,s)},d(t){t&&h(e),t&&h(n),t&&h(o)}}}function ke(e){let n,s,r,i,l,a,u,c,f,d,y,v,b,w,k;return{c(){n=g("Add Operator: "),s=m("br"),r=m("br"),i=x(),l=m("button"),l.textContent="Dense",a=x(),u=m("button"),u.textContent="Convolutional",c=x(),f=m("button"),f.textContent="PReLU",d=x(),y=m("button"),y.textContent="Softmax",v=x(),b=m("button"),b.textContent="Max Pool",$(l,"class","option"),$(u,"class","option"),$(f,"class","option"),$(y,"class","option"),$(b,"class","option")},m(t,o){p(t,n,o),p(t,s,o),p(t,r,o),p(t,i,o),p(t,l,o),p(t,a,o),p(t,u,o),p(t,c,o),p(t,f,o),p(t,d,o),p(t,y,o),p(t,v,o),p(t,b,o),w||(k=[_(l,"click",e[10]),_(u,"click",e[11]),_(f,"click",e[12]),_(y,"click",e[13]),_(b,"click",e[14])],w=!0)},p:t,d(t){t&&h(n),t&&h(s),t&&h(r),t&&h(i),t&&h(l),t&&h(a),t&&h(u),t&&h(c),t&&h(f),t&&h(d),t&&h(y),t&&h(v),t&&h(b),w=!1,o(k)}}}function Me(t){let e,n,s,r,i,l,a,u,c,d,y,v,w,M,C,T,P,S,L,q,E,I;return{c(){e=g("Edit Fully Connected Operator: "),n=m("br"),s=m("br"),r=x(),i=m("form"),l=m("label"),l.textContent="Input:",a=x(),u=m("input"),c=m("br"),d=x(),y=m("label"),y.textContent="Output:",v=x(),w=m("input"),M=m("br"),C=x(),T=m("label"),T.textContent="Parameter Shape:",P=x(),S=m("input"),L=x(),q=m("button"),q.textContent="Submit",$(l,"for","name"),$(u,"id","name"),$(u,"type","text"),$(y,"for","name"),$(w,"id","name"),$(w,"type","text"),$(T,"for","name"),$(S,"id","name"),$(S,"type","text"),$(q,"class","submit")},m(o,h){p(o,e,h),p(o,n,h),p(o,s,h),p(o,r,h),p(o,i,h),f(i,l),f(i,a),f(i,u),k(u,t[2]),f(i,c),f(i,d),f(i,y),f(i,v),f(i,w),k(w,t[3]),f(i,M),f(i,C),f(i,T),f(i,P),f(i,S),k(S,t[4]),p(o,L,h),p(o,q,h),E||(I=[_(u,"input",t[43]),_(u,"change",t[44]),_(w,"input",t[45]),_(w,"change",t[46]),_(S,"input",t[47]),_(S,"change",t[48]),_(i,"submit",b(t[20])),_(q,"click",t[49])],E=!0)},p(t,e){4&e[0]&&u.value!==t[2]&&k(u,t[2]),8&e[0]&&w.value!==t[3]&&k(w,t[3]),16&e[0]&&S.value!==t[4]&&k(S,t[4])},d(t){t&&h(e),t&&h(n),t&&h(s),t&&h(r),t&&h(i),t&&h(L),t&&h(q),E=!1,o(I)}}}function Ce(t){let e,n,s,r,i,l,a,u,c,d,y,v,w,M,C,T,P,S,L,q,E,I;return{c(){e=g("Edit Convolution Operator: "),n=m("br"),s=m("br"),r=x(),i=m("form"),l=m("label"),l.textContent="Input:",a=x(),u=m("input"),c=m("br"),d=x(),y=m("label"),y.textContent="Output:",v=x(),w=m("input"),M=m("br"),C=x(),T=m("label"),T.textContent="Kernel Shape:",P=x(),S=m("input"),L=x(),q=m("button"),q.textContent="Submit",$(l,"for","name"),$(u,"id","name"),$(u,"type","text"),$(y,"for","name"),$(w,"id","name"),$(w,"type","text"),$(T,"for","name"),$(S,"id","name"),$(S,"type","text"),$(q,"class","submit")},m(o,h){p(o,e,h),p(o,n,h),p(o,s,h),p(o,r,h),p(o,i,h),f(i,l),f(i,a),f(i,u),k(u,t[2]),f(i,c),f(i,d),f(i,y),f(i,v),f(i,w),k(w,t[3]),f(i,M),f(i,C),f(i,T),f(i,P),f(i,S),k(S,t[4]),p(o,L,h),p(o,q,h),E||(I=[_(u,"input",t[50]),_(u,"change",t[51]),_(w,"input",t[52]),_(w,"change",t[53]),_(S,"input",t[54]),_(S,"change",t[55]),_(i,"submit",b(t[20])),_(q,"click",t[56])],E=!0)},p(t,e){4&e[0]&&u.value!==t[2]&&k(u,t[2]),8&e[0]&&w.value!==t[3]&&k(w,t[3]),16&e[0]&&S.value!==t[4]&&k(S,t[4])},d(t){t&&h(e),t&&h(n),t&&h(s),t&&h(r),t&&h(i),t&&h(L),t&&h(q),E=!1,o(I)}}}function Te(t){let e,n,s,r,i,l,a,u,c,d,y,v,w;return{c(){e=g("Edit PReLU Operator: "),n=m("br"),s=m("br"),r=x(),i=m("form"),l=m("label"),l.textContent="Input/Output size:",a=x(),u=m("input"),c=m("br"),d=x(),y=m("button"),y.textContent="Submit",$(l,"for","name"),$(u,"id","name"),$(u,"type","text"),$(y,"class","submit")},m(o,h){p(o,e,h),p(o,n,h),p(o,s,h),p(o,r,h),p(o,i,h),f(i,l),f(i,a),f(i,u),k(u,t[2]),f(i,c),p(o,d,h),p(o,y,h),v||(w=[_(u,"input",t[57]),_(u,"change",t[58]),_(i,"submit",b(t[20])),_(y,"click",t[59])],v=!0)},p(t,e){4&e[0]&&u.value!==t[2]&&k(u,t[2])},d(t){t&&h(e),t&&h(n),t&&h(s),t&&h(r),t&&h(i),t&&h(d),t&&h(y),v=!1,o(w)}}}function Pe(t){let e,n,s,r,i,l,a,u,c,d,y,v,w;return{c(){e=g("Edit Softmax Operator: "),n=m("br"),s=m("br"),r=x(),i=m("form"),l=m("label"),l.textContent="Input/Output size:",a=x(),u=m("input"),c=m("br"),d=x(),y=m("button"),y.textContent="Submit",$(l,"for","name"),$(u,"id","name"),$(u,"type","text"),$(y,"class","submit")},m(o,h){p(o,e,h),p(o,n,h),p(o,s,h),p(o,r,h),p(o,i,h),f(i,l),f(i,a),f(i,u),k(u,t[2]),f(i,c),p(o,d,h),p(o,y,h),v||(w=[_(u,"input",t[60]),_(u,"change",t[61]),_(i,"submit",b(t[20])),_(y,"click",t[62])],v=!0)},p(t,e){4&e[0]&&u.value!==t[2]&&k(u,t[2])},d(t){t&&h(e),t&&h(n),t&&h(s),t&&h(r),t&&h(i),t&&h(d),t&&h(y),v=!1,o(w)}}}function Se(t){let e,n,s,r,i,l,u,c,y,v,b,k,C,T,P,S,L,q,E,I,z,A,R,F,O,N,D,U,G,X,J,K,Q,V,Z,tt,et,ot,st,rt,it,lt,at,ut,ct,ft,pt,ht,dt,mt,yt,gt,xt,vt,_t,bt,$t,wt,kt,Mt,Ct,Tt,Pt,St,Lt,qt,Et,It,zt,At,Rt,Ft,Ot,Nt,Dt,Ut,Gt,Bt,Wt=t[0],Ht=[];for(let e=0;e<Wt.length;e+=1)Ht[e]=ge(pe(t,Wt,e));return kt=new nt({props:{id:"clear",$$slots:{default:[xe]},$$scope:{ctx:t}}}),Ct=new nt({props:{id:"generate",$$slots:{default:[be]},$$scope:{ctx:t}}}),Pt=new nt({props:{id:"tutorial",$$slots:{default:[$e]},$$scope:{ctx:t}}}),Lt=new nt({props:{id:"about",$$slots:{default:[we]},$$scope:{ctx:t}}}),Et=new nt({props:{id:"add_operator",$$slots:{default:[ke]},$$scope:{ctx:t}}}),zt=new nt({props:{id:"edit_fully_connected",$$slots:{default:[Me]},$$scope:{ctx:t}}}),Rt=new nt({props:{id:"edit_convolution",$$slots:{default:[Ce]},$$scope:{ctx:t}}}),Ot=new nt({props:{id:"edit_prelu",$$slots:{default:[Te]},$$scope:{ctx:t}}}),Dt=new nt({props:{id:"edit_softmax",$$slots:{default:[Pe]},$$scope:{ctx:t}}}),{c(){e=m("main"),n=m("nav"),s=m("div"),r=m("ul"),i=m("li"),l=m("a"),u=m("img"),y=x(),v=m("div"),b=m("ul"),k=m("li"),C=m("a"),T=g("Clear Canvas"),P=x(),S=m("li"),L=m("a"),q=g("Optimize"),E=x(),I=m("li"),z=m("a"),A=g("Generate Code"),R=x(),F=m("li"),O=m("a"),N=g("?"),D=x(),U=m("div"),G=m("div"),X=m("div"),J=m("a"),K=g("+ add operator"),Q=x(),V=m("div"),Z=m("div"),Z.innerHTML='<p id="layers-title" class="svelte-q8whf6">Added Layers:</p>',tt=x();for(let t=0;t<Ht.length;t+=1)Ht[t].c();et=x(),ot=m("div"),st=m("canvas"),rt=x(),it=m("div"),lt=g("Network Parameters: _\tLayers: "),at=g(t[1]),ut=x(),ct=m("div"),ft=m("a"),pt=g("About"),ht=x(),dt=m("a"),mt=m("img"),gt=g("Github"),xt=x(),vt=m("a"),_t=m("img"),$t=g("Feedback"),wt=x(),H(kt.$$.fragment),Mt=x(),H(Ct.$$.fragment),Tt=x(),H(Pt.$$.fragment),St=x(),H(Lt.$$.fragment),qt=x(),H(Et.$$.fragment),It=x(),H(zt.$$.fragment),At=x(),H(Rt.$$.fragment),Ft=x(),H(Ot.$$.fragment),Nt=x(),H(Dt.$$.fragment),a(u.src,c=Le)||$(u,"src",c),$(u,"alt","Neurula logo."),M(u,"max-height","60px"),$(l,"href",qe),$(l,"class","svelte-q8whf6"),$(i,"class","svelte-q8whf6"),$(r,"class","navbar-list svelte-q8whf6"),$(s,"class","left svelte-q8whf6"),$(C,"href",void 0),$(C,"class","nav-button svelte-q8whf6"),$(k,"class","svelte-q8whf6"),$(L,"href",void 0),$(L,"class","nav-button svelte-q8whf6"),$(S,"class","svelte-q8whf6"),$(z,"href",void 0),$(z,"class","nav-button svelte-q8whf6"),$(I,"class","svelte-q8whf6"),$(O,"href",void 0),$(O,"class","nav-button svelte-q8whf6"),$(F,"class","svelte-q8whf6"),$(b,"class","navbar-list svelte-q8whf6"),$(v,"class","right svelte-q8whf6"),$(n,"class","svelte-q8whf6"),$(J,"href",void 0),$(J,"class","add_op_button svelte-q8whf6"),$(X,"id","toolbar_title"),$(X,"class","svelte-q8whf6"),$(Z,"id","toolbar_add_operator"),$(Z,"class","svelte-q8whf6"),$(V,"id","toolbar_list"),$(V,"class","svelte-q8whf6"),$(G,"id","toolbar"),$(G,"class","svelte-q8whf6"),$(st,"id","gui_canvas"),$(st,"class","svelte-q8whf6"),$(it,"id","canvas_footer"),$(it,"class","svelte-q8whf6"),$(ot,"id","canvas_container"),$(ot,"class","svelte-q8whf6"),$(U,"id","workspace"),$(U,"class","svelte-q8whf6"),$(ft,"href",void 0),$(ft,"class","footer-button svelte-q8whf6"),$(mt,"id","git"),a(mt.src,yt=Ee)||$(mt,"src",yt),$(mt,"alt","Github logo."),M(mt,"max-height","20px"),$(mt,"class","svelte-q8whf6"),$(dt,"href",ze),$(dt,"class","svelte-q8whf6"),$(_t,"id","git"),a(_t.src,bt=Ie)||$(_t,"src",bt),$(_t,"alt","Google Forms logo."),M(_t,"max-height","20px"),$(_t,"class","svelte-q8whf6"),$(vt,"href",Ae),$(vt,"class","svelte-q8whf6"),$(ct,"class","footer svelte-q8whf6"),$(e,"class","svelte-q8whf6")},m(o,a){p(o,e,a),f(e,n),f(n,s),f(s,r),f(r,i),f(i,l),f(l,u),f(n,y),f(n,v),f(v,b),f(b,k),f(k,C),f(C,T),f(b,P),f(b,S),f(S,L),f(L,q),f(b,E),f(b,I),f(I,z),f(z,A),f(b,R),f(b,F),f(F,O),f(O,N),f(e,D),f(e,U),f(U,G),f(G,X),f(X,J),f(J,K),f(G,Q),f(G,V),f(V,Z),f(V,tt);for(let t=0;t<Ht.length;t+=1)Ht[t].m(V,null);f(U,et),f(U,ot),f(ot,st),f(ot,rt),f(ot,it),f(it,lt),f(it,at),f(e,ut),f(e,ct),f(ct,ft),f(ft,pt),f(ct,ht),f(ct,dt),f(dt,mt),f(dt,gt),f(ct,xt),f(ct,vt),f(vt,_t),f(vt,$t),f(e,wt),j(kt,e,null),f(e,Mt),j(Ct,e,null),f(e,Tt),j(Pt,e,null),f(e,St),j(Lt,e,null),f(e,qt),j(Et,e,null),f(e,It),j(zt,e,null),f(e,At),j(Rt,e,null),f(e,Ft),j(Ot,e,null),f(e,Nt),j(Dt,e,null),Ut=!0,Gt||(Bt=[_(C,"click",t[23]),_(L,"click",De),_(z,"click",t[24]),_(O,"click",t[25]),_(J,"click",t[26]),_(ft,"click",t[39])],Gt=!0)},p(t,e){if(513&e[0]){let n;for(Wt=t[0],n=0;n<Wt.length;n+=1){const o=pe(t,Wt,n);Ht[n]?Ht[n].p(o,e):(Ht[n]=ge(o),Ht[n].c(),Ht[n].m(V,null))}for(;n<Ht.length;n+=1)Ht[n].d(1);Ht.length=Wt.length}(!Ut||2&e[0])&&w(at,t[1]);const n={};8388608&e[2]&&(n.$$scope={dirty:e,ctx:t}),kt.$set(n);const o={};32&e[0]|8388608&e[2]&&(o.$$scope={dirty:e,ctx:t}),Ct.$set(o);const s={};8388608&e[2]&&(s.$$scope={dirty:e,ctx:t}),Pt.$set(s);const r={};8388608&e[2]&&(r.$$scope={dirty:e,ctx:t}),Lt.$set(r);const i={};8388608&e[2]&&(i.$$scope={dirty:e,ctx:t}),Et.$set(i);const l={};28&e[0]|8388608&e[2]&&(l.$$scope={dirty:e,ctx:t}),zt.$set(l);const a={};28&e[0]|8388608&e[2]&&(a.$$scope={dirty:e,ctx:t}),Rt.$set(a);const u={};4&e[0]|8388608&e[2]&&(u.$$scope={dirty:e,ctx:t}),Ot.$set(u);const c={};4&e[0]|8388608&e[2]&&(c.$$scope={dirty:e,ctx:t}),Dt.$set(c)},i(t){Ut||(B(kt.$$.fragment,t),B(Ct.$$.fragment,t),B(Pt.$$.fragment,t),B(Lt.$$.fragment,t),B(Et.$$.fragment,t),B(zt.$$.fragment,t),B(Rt.$$.fragment,t),B(Ot.$$.fragment,t),B(Dt.$$.fragment,t),Ut=!0)},o(t){W(kt.$$.fragment,t),W(Ct.$$.fragment,t),W(Pt.$$.fragment,t),W(Lt.$$.fragment,t),W(Et.$$.fragment,t),W(zt.$$.fragment,t),W(Rt.$$.fragment,t),W(Ot.$$.fragment,t),W(Dt.$$.fragment,t),Ut=!1},d(t){t&&h(e),d(Ht,t),Y(kt),Y(Ct),Y(Pt),Y(Lt),Y(Et),Y(zt),Y(Rt),Y(Ot),Y(Dt),Gt=!1,o(Bt)}}}Kt.src="grid_icon.png";let Le="./transparent_bar_logo.png",qe="http://127.0.0.1:8000",Ee="https://cdn-icons-png.flaticon.com/512/25/25231.png",Ie="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Google_Forms_logo_%282014-2020%29.svg/640px-Google_Forms_logo_%282014-2020%29.svg.png",ze="https://github.com/genicos/nn_gui",Ae="https://docs.google.com/forms/d/e/1FAIpQLSdMQYYT9P0cp507dm4xyCr9cvJJ9RUwAcFF21pWBhWLWyqPng/viewform?usp=sf_link",Re="./Fully_Connected.png",Fe="./Convolution.png",Oe="./PReLU.png",Ne="./Softmax.png";function De(){}const Ue=()=>{},Ge=()=>{},Be=()=>{},We=()=>{};function He(t,e,n){var o;brython(),o=()=>{Zt(),document.getElementById("gui_canvas").addEventListener("mousemove",r,!1)},S().$$.on_mount.push(o);var s=[];function r(t){var e=wt(Ot[0],zt,At);for(let t=0;t<s.length;t++)n(0,s[t].hovered="false",s);for(let t=0;t<e.length;t++)n(0,s[e[t]].hovered="true",s)}function i(){var t=jt().operators.map((t=>xt[t.func].name)),e=[];if(0!=t.length){e.push(t[0]);for(let n=1;n<t.length;n++){var o=0;for(let e=0;e<n;e++)t[n]==t[e]&&o++;var r=t[n];o>0&&(r+=" "+String(o+1)),e.push(r)}for(let o=0;o<e.length;o++)n(0,s[o]={operator_type:t[o],operator_name:e[o],id:o,highlighted:"T"},s)}}function l(t){var e="";switch(t){case 0:e=d;break;case 1:e=y;break;case 2:e=m}if(null!=e){var n=[],o="";for(let t=0;t<e.length;t++)","==e[t]?(n.push(parseInt(o)),o=""):o+=e[t];switch(n.push(parseInt(o)),t){case 0:Qt(f,0,!0,n);break;case 1:Qt(f,1,!0,n);break;case 2:Qt(f,0,!1,n)}a()}}function a(){var t=jt(),e=t.operators[f];t.input_tensors.includes(e.inputs[0])&&(p="off"),t.output_tensors.includes(e.outputs[0])&&(h="off");var o="";for(let n=0;n<t.tensors[e.inputs[0]].form.length;n++)n>0&&(o+=","),o+=String(t.tensors[e.inputs[0]].form[n]);n(2,d=o);var s="";for(let n=0;n<t.tensors[e.outputs[0]].form.length;n++)n>0&&(s+=","),s+=String(t.tensors[e.outputs[0]].form[n]);if(n(3,m=s),!(e.inputs.length<2)){var r="";for(let n=0;n<t.tensors[e.inputs[1]].form.length;n++)n>0&&(r+=","),r+=String(t.tensors[e.inputs[1]].form[n]);n(4,y=r)}}function u(){var t,e;"off"===p&&(t=f,(e=Ot[0]).input_tensors.push(e.operators[t].inputs[0])),"off"===h&&function(t){var e=Ot[0];e.output_tensors.push(e.operators[t].outputs[0])}(f)}function c(t){f=t,p="None",h="None",a()}let f,p,h,d,m,y,g=0,x="Tensorflow",v=[{id:0,text:"Adam"},{id:1,text:"Nadam"},{id:2,text:"Adadelta"},{id:3,text:"Adagrad"},{id:4,text:"Adamax"},{id:5,text:"RMSprop"},{id:6,text:"SGD"}],_=[{id:1,name:"Dense"},{id:2,name:"Convolutional"},{id:3,name:"PReLU"},{id:4,name:"Softmax"},{id:5,name:"Maxpool"}];let b="";function $(t){}function w(t){n(5,x=t)}return[s,g,d,m,y,x,function(){Z("clear").close(1),Ot[0]=new dt},l,u,c,function(){Yt(5),Z("add_operator").close(1),n(1,g++,g),i()},function(){Yt(10),Z("add_operator").close(1),n(1,g++,g),i()},function(){Yt(12),Z("add_operator").close(1),i()},function(){Yt(7),Z("add_operator").close(1),i()},function(){Yt(15),Z("add_operator").close(1),i()},undefined,[{id:0,text:"Categorical Cross Entropy"},{id:2,text:"Absolute Error"},{id:3,text:"Hinge Loss"},{id:4,text:"Huber Loss"},{id:5,text:"Mean Squared Error"}],undefined,v,function(){alert(`Generating code in ${x} with optimizer ${v.id} (${v.text})`)},()=>{_=[..._,{id:Math.random(),operator_type:b}],b=""},$,w,()=>Z("clear").open($),()=>Z("generate").open(w),()=>Z("tutorial").open(),()=>Z("add_operator").open(),t=>{Z("edit_fully_connected").open(),c(t.id)},()=>{re([])},t=>{re([t.id])},t=>{Z("edit_convolution").open(),c(t.id)},()=>{re([])},t=>{re([t.id])},t=>{Z("edit_prelu").open(),c(t.id)},()=>{re([])},t=>{re([t.id])},t=>{Z("edit_softmax").open(),c(t.id)},()=>{re([])},t=>{re([t.id])},()=>Z("about").open(),()=>Z("clear").close(0),function(t){x=t,n(5,x)},()=>{Z("generate").close()},function(){d=this.value,n(2,d)},()=>{l(0)},function(){m=this.value,n(3,m)},()=>{l(2)},function(){y=this.value,n(4,y)},()=>{l(1)},()=>{Z("edit_fully_connected").close(),u()},function(){d=this.value,n(2,d)},()=>{l(0)},function(){m=this.value,n(3,m)},()=>{l(2)},function(){y=this.value,n(4,y)},()=>{l(1)},()=>{Z("edit_convolution").close(),u()},function(){d=this.value,n(2,d)},()=>{l(0)},()=>{Z("edit_prelu").close(),u()},function(){d=this.value,n(2,d)},()=>{l(0)},()=>{Z("edit_softmax").close(),u()}]}return new class extends K{constructor(t){super(),J(this,t,He,Se,r,{},null,[-1,-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
