var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function n(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,a;function l(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function u(t,e,s,n){return t[1]&&n?function(t,e){for(const s in e)t[s]=e[s];return t}(s.ctx.slice(),t[1](n(e))):s.ctx}function c(t,e){t.appendChild(e)}function p(t,e,s){t.insertBefore(e,s||null)}function h(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function y(){return x(" ")}function m(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function v(t,e,s){null==s?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function _(t,e,s,n){null===s?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}function g(t,e,s){t.classList[s?"add":"remove"](e)}function $(t){a=t}function w(){if(!a)throw new Error("Function called outside component initialization");return a}const b=[],k=[],T=[],L=[],C=Promise.resolve();let P=!1;function E(t){T.push(t)}const M=new Set;let S=0;function R(){const t=a;do{for(;S<b.length;){const t=b[S];S++,$(t),D(t.$$)}for($(null),b.length=0,S=0;k.length;)k.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];M.has(e)||(M.add(e),e())}T.length=0}while(b.length);for(;L.length;)L.pop()();P=!1,M.clear(),$(t)}function D(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const A=new Set;let O;function U(t,e){t&&t.i&&(A.delete(t),t.i(e))}function q(t,e,s,n){if(t&&t.o){if(A.has(t))return;A.add(t),undefined.c.push((()=>{A.delete(t),n&&(s&&t.d(1),n())})),t.o(e)}}function B(t){t&&t.c()}function z(t,s,r,i){const{fragment:a,on_mount:l,on_destroy:u,after_update:c}=t.$$;a&&a.m(s,r),i||E((()=>{const s=l.map(e).filter(o);u?u.push(...s):n(s),t.$$.on_mount=[]})),c.forEach(E)}function N(t,e){const s=t.$$;null!==s.fragment&&(n(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(b.push(t),P||(P=!0,C.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(e,o,r,i,l,u,c,p=[-1]){const f=a;$(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:s(),dirty:p,skip_bound:!1,root:o.target||f.$$.root};c&&c(d.root);let x=!1;if(d.ctx=r?r(e,o.props||{},((t,s,...n)=>{const o=n.length?n[0]:s;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),x&&W(e,t)),s})):[],d.update(),x=!0,n(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();o.intro&&U(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),R()}$(f)}class G{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(t){let e,s,o,r,i,a,l,x,_,$,w;const b=t[5].default,k=function(t,e,s,n){if(t){const o=u(t,e,s,n);return t[0](o)}}(b,t,t[4],null);return{c(){e=f("div"),s=f("div"),o=d("svg"),r=d("circle"),i=d("line"),a=d("line"),l=y(),x=f("div"),k&&k.c(),v(r,"cx","6"),v(r,"cy","6"),v(r,"r","6"),v(i,"x1","3"),v(i,"y1","3"),v(i,"x2","9"),v(i,"y2","9"),v(i,"class","svelte-1q0isnv"),v(a,"x1","9"),v(a,"y1","3"),v(a,"x2","3"),v(a,"y2","9"),v(a,"class","svelte-1q0isnv"),v(o,"id","close"),v(o,"viewBox","0 0 12 12"),v(o,"class","svelte-1q0isnv"),v(x,"id","modal-content"),v(x,"class","svelte-1q0isnv"),v(s,"id","modal"),v(s,"class","svelte-1q0isnv"),v(e,"id","topModal"),v(e,"class","svelte-1q0isnv"),g(e,"visible",t[1])},m(n,u){var h;p(n,e,u),c(e,s),c(s,o),c(o,r),c(o,i),c(o,a),c(s,l),c(s,x),k&&k.m(x,null),t[7](e),_=!0,$||(w=[m(o,"click",t[6]),m(s,"click",(h=H,function(t){return t.stopPropagation(),h.call(this,t)})),m(e,"click",t[8])],$=!0)},p(t,[s]){k&&k.p&&(!_||16&s)&&function(t,e,s,n,o,r){if(o){const i=u(e,s,n,r);t.p(i,o)}}(k,b,t,t[4],_?function(t,e,s,n){if(t[2]&&n){const o=t[2](n(s));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],s=Math.max(e.dirty.length,o.length);for(let n=0;n<s;n+=1)t[n]=e.dirty[n]|o[n];return t}return e.dirty|o}return e.dirty}(b,t[4],s,null):function(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let t=0;t<s;t++)e[t]=-1;return e}return-1}(t[4]),null),2&s&&g(e,"visible",t[1])},i(t){_||(U(k,t),_=!0)},o(t){q(k,t),_=!1},d(s){s&&h(e),k&&k.d(s),t[7](null),$=!1,n(w)}}}const X={};function F(t=""){return X[t]}const H=()=>{};function Y(t,e,s){let n,o,r,{$$slots:i={},$$scope:a}=e,l=!1,{id:u=""}=e;function c(t){"Escape"==t.key&&O==n&&p()}function p(t){l&&(window.removeEventListener("keydown",c),O=o,null==O&&(document.body.style.overflow=""),s(1,l=!1),r&&r(t))}var h;X[u]={open:function(t){r=t,l||(o=O,O=n,window.addEventListener("keydown",c),document.body.style.overflow="hidden",s(1,l=!0),document.body.appendChild(n))},close:p},h=()=>{delete X[u],window.removeEventListener("keydown",c)},w().$$.on_destroy.push(h);return t.$$set=t=>{"id"in t&&s(3,u=t.id),"$$scope"in t&&s(4,a=t.$$scope)},[n,l,p,u,a,i,()=>p(),function(t){k[t?"unshift":"push"]((()=>{n=t,s(0,n)}))},()=>p()]}class J extends G{constructor(t){super(),j(this,t,Y,I,r,{id:3})}}class K{constructor(){this.tensors=[],this.operators=[],this.input_tensors=[],this.param_tensors=[],this.output_tensors=[],this.truth_tensors=[],this.loss=null}add_tensor(t){this.tensors.push(t)}add_operator(t){var e=t.clone();this.operators.push(e);for(let t=0;t<e.inputs.length;t++)this.tensors[e.inputs[t]].input_to.push(this.operators.length-1);for(let t=0;t<e.outputs.length;t++)this.tensors[e.outputs[t]].output_of=this.operators.length-1}update_tensors(){for(let t=0;t<this.tensors.length;t++)this.tensors[t].input_to=[],this.tensors[t].output_of=null;for(let t=0;t<this.operators.length;t++){for(let e=0;e<this.operators[t].inputs.length;e++)this.tensors[this.operators[t].inputs[e]].input_to.push(t);for(let e=0;e<this.operators[t].outputs.length;e++)this.tensors[this.operators[t].outputs[e]].output_of=t}}expand(){for(let a=0;a<this.operators.length;a++)if(0==this.operators[a].func&&this.operators[a].network){var t=this.operators[a].network;t.expand();var e=this.operators[a],s=this.operators.length;this.operators[a]=t.operators[0];for(let e=1;e<t.operators.length;e++)this.add_operator(t.operators[e]);for(let l=0;l<t.tensors.length;l++){var n=l;if(t.input_tensors.includes(l)){var o=t.input_tensors.indexOf(l);n=e.inputs[o]}else if(t.output_tensors.includes(l)){o=t.output_tensors.indexOf(l);n=e.outputs[o]}else this.add_tensor(t.tensors[l]),n=this.tensors.length-1;for(let e=0;e<t.tensors[l].input_to.length;e++){var r=t.tensors[l].input_to[e],i=t.operators[r].inputs.indexOf(l);0==r?this.operators[a].inputs[i]=n:this.operators[r+s-1].inputs[i]=n}if(t.tensors[l].output_of||0==t.tensors[l].output_of){r=t.tensors[l].output_of,i=t.operators[r].outputs.indexOf(l);0==r?this.operators[a].outputs[i]=n:this.operators[r+s-1].outputs[i]=n}}this.update_tensors()}}to_string(){var t="";t+="Tensors: \n";for(let e=0;e<this.tensors.length;e++){t+="\t"+e+":\n",this.tensors[e].form&&(t+="\t\tform: "+String(this.tensors[e].form)+"\n"),t+="\t\tinput_to:\n";for(let s=0;s<this.tensors[e].input_to.length;s++)t+="\t\t\t"+this.tensors[e].input_to[s]+"\n";t+="\t\toutput_of\n",t+="\t\t\t"+this.tensors[e].output_of+"\n"}t+="Operators: \n";for(let e=0;e<this.operators.length;e++){t+="\t"+e+":\n",t+="\t\tinputs:\n";for(let s=0;s<this.operators[e].inputs.length;s++)t+="\t\t\t"+this.operators[e].inputs[s]+"\n";t+="\t\toutputs:\n";for(let s=0;s<this.operators[e].outputs.length;s++)t+="\t\t\t"+this.operators[e].outputs[s]+"\n";t+="\t\tfunc: "+this.operators[e].func+"\n"}t+="input_tensors:\n";for(let e=0;e<this.input_tensors.length;e++)t+="\t"+this.input_tensors[e]+"\n";t+="param_tensors:\n";for(let e=0;e<this.param_tensors.length;e++)t+="\t"+this.param_tensors[e]+"\n";t+="output_tensors:\n";for(let e=0;e<this.output_tensors.length;e++)t+="\t"+this.output_tensors[e]+"\n";return t}}class Q{constructor(t,e){this.scalar=!1,this.live=t||!1,e?this.form=e:e=[],this.x=0,this.y=0,this.tx=0,this.ty=0,this.selected=!1,this.input_to=[],this.output_of=null}calc_size(){if(this.form){var t=1;for(let e=0;e<this.form.length;e++)t*=this.form[e];this.size=t}else this.size=0;return this.size}}class V{constructor(t,e){this.name=t,this.num_inputs=e}calc_form(t,e){var s=[];switch(console.log(this.name),this.name){case"identity":case"add":case"subtract":case"scale":case"softmax":case"hardmax":case"ReLU":case"LeakyReLU":case"Leaky to ReLU":s.push(e.tensors[t[0]].form);break;case"full":var n=e.tensors[t[0]].form,o=e.tensors[t[1]].form,r=1;for(let t=0;t<n.length;t++)r*=n[t];var i=1;for(let t=0;t<o.length;t++)i*=o[t];(a=[]).push(i/r),s.push(a);break;case"amass":case"max":(a=[]).push(1),s.push(a);break;case"convolution":n=e.tensors[t[0]].form,o=e.tensors[t[1]].form;var a=[];for(let t=0;t<n.length;t++)o.length<=t?a.push(n[t]):a.push(n[t]-o[t]+1);s.push(a);break;case"squared dist":s.push([1])}return s}}class Z{constructor(t){this.inputs=[],this.outputs=[],this.func=t,this.size=null,this.network=null}clone(){var t=new Z(this.func);return t.inputs=[...this.inputs],t.outputs=[...this.outputs],t.network=this.network,t}}var tt=Array.apply(null,Array(12)).map((function(){}));tt[0]=new V("abstraction",0),tt[1]=new V("identity",1),tt[2]=new V("add",2),tt[3]=new V("subtract",2),tt[4]=new V("scale",2),tt[5]=new V("full",2),tt[6]=new V("amass",1),tt[7]=new V("softmax",1),tt[8]=new V("hardmax",1),tt[9]=new V("max",1),tt[10]=new V("convolution",2),tt[11]=new V("squared dist",2),tt[12]=new V("PReLU",1),tt[13]=new V("LeakyReLU",1),tt[14]=new V("Leaky to ReLU",1);const et=10;function st(t,e,s){var n={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4},o=t.operators[e],r=!1;for(let t=0;t<o.outputs.length;t++)o.outputs[t]==s&&(r=!0);var i=0;if(!r)for(let t=0;t<o.inputs.length;t++)o.inputs[t]==s&&(i=t);var a=!1,l=!1,u=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:l=!0;break;case 4:case 5:case 10:u=!0;break;case 6:case 7:case 8:case 9:case 12:a=!0}var c=t.tensors[o.inputs[0]],p=t.tensors[o.inputs[1]],h=t.tensors[o.outputs[0]];if(a&&(r?n.x_min=c.x+40:n.x_max=h.x-40),u)if(r)n.x_min=p.x+20,n.y_min=p.y+20;else if(1==i){n.x_min=c.x+20,n.x_max=h.x-20;var f=Math.min(h.y,c.y);n.y_max=f-20}else n.x_max=p.x-20,n.y_min=p.y+20;if(l)if(r){var d=Math.max(c.x,p.x);n.x_min=d+40}else 1==i?(n.x_max=h.x-40,n.y_max=c.y-20):(n.x_max=h.x-40,n.y_min=p.y+20);return n}function nt(t,e,s,n,o=!1){t.tensors[e].x=s,t.tensors[e].y=n,o&&(t.tensors[e].x-=(t.tensors[e].x+et)%20-et,t.tensors[e].y-=(t.tensors[e].y+et)%20-et);var r={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4};for(let s=0;s<t.tensors[e].input_to.length;s++){let n=st(t,t.tensors[e].input_to[s],e);r.x_min=Math.max(r.x_min,n.x_min),r.x_max=Math.min(r.x_max,n.x_max),r.y_min=Math.max(r.y_min,n.y_min),r.y_max=Math.min(r.y_max,n.y_max)}if(null!=t.tensors[e].output_of){let s=st(t,t.tensors[e].output_of,e);r.x_min=Math.max(r.x_min,s.x_min),r.x_max=Math.min(r.x_max,s.x_max),r.y_min=Math.max(r.y_min,s.y_min),r.y_max=Math.min(r.y_max,s.y_max)}t.tensors[e].x<r.x_min&&(t.tensors[e].x=r.x_min),t.tensors[e].x>r.x_max&&(t.tensors[e].x=r.x_max),t.tensors[e].y<r.y_min&&(t.tensors[e].y=r.y_min),t.tensors[e].y>r.y_max&&(t.tensors[e].y=r.y_max)}function ot(t,e,s){var n=[];for(let o=0;o<t.tensors.length;o++)t.tensors[o].x-et<e&&t.tensors[o].x+et>e&&t.tensors[o].y-et<s&&t.tensors[o].y+et>s&&n.push(o);return n}function rt(t,e){var s=t.tensors[e],n=s.input_to;s.input_to=[];for(let l=0;l<n.length;l++){var o=n[l],r=t.operators[o],i=t.tensors.length;t.add_tensor(new Q(!0));var a=r.inputs.findIndex((t=>t==e));r.inputs[a]=i,t.tensors[i].x=s.x+20,t.tensors[i].y=s.y,t.tensors[i].input_to=[o],t.tensors[i].output_of=null,t.tensors[i].live=!1}s.x-=20,s.live=!1}function it(t,e,s){if(t.tensors[e].live&&t.tensors[s].live)return void console.log("Both merged tensors are live, so don't do anything.");let n=t.tensors[e],o=t.tensors[s],r=s,i=e;if(null!=n.output_of&&null==o.output_of);else{if(null==o.output_of||null!=n.output_of)return void console.log("Error merging, only one input must have an output");var a=o;o=n,n=a,r=e,i=s}if(console.log(n.output_of,o.input_to),n.output_of==o.input_to)return void console.log("Error merging, these are input and output of the same function");let l=t.operators[o.input_to].inputs.indexOf(r);t.operators[o.input_to].inputs[l]=i,n.input_to=o.input_to,n.live=n.live||o.live,t.tensors[i].selected=!0,function(t,e){for(let s=0;s<t.operators.length;s++){for(let n=0;n<t.operators[s].inputs.length;n++)t.operators[s].inputs[n]>e&&(t.operators[s].inputs[n]-=1);for(let n=0;n<t.operators[s].outputs.length;n++)t.operators[s].outputs[n]>e&&(t.operators[s].outputs[n]-=1)}t.tensors.splice(e,1)}(t,r)}var at=0,lt=0,ut=0,ct=0;const pt=10;var ht=!1,ft=-1,dt=-1,xt=0,yt=0,mt=0,vt=0,_t=[],gt=!1,$t=!0;function wt(t,e=40,s=60){Pt();var n=!1,o=!1,r=!1;switch(t){case 0:case 1:break;case 2:case 4:case 11:o=!0;break;case 4:case 5:case 10:r=!0;break;case 6:case 7:case 8:case 9:case 12:n=!0}let i=new Z;i.func=t;var a=_t[0].tensors.length;n&&(_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+0].x=e+0,_t[0].tensors[a+0].y=s+0,_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+1].x=e+60,_t[0].tensors[a+1].y=s+0,i.inputs=[a+0],i.outputs=[a+1]),r&&(_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+0].x=e+0,_t[0].tensors[a+0].y=s+40,_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+1].x=e+40,_t[0].tensors[a+1].y=s+0,_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+2].x=e+80,_t[0].tensors[a+2].y=s+40,i.inputs=[a+0,a+1],i.outputs=[a+2]),o&&(_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+0].x=e+0,_t[0].tensors[a+0].y=s+40,_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+1].x=e+0,_t[0].tensors[a+1].y=s+0,_t[0].add_tensor(new Q(!1)),_t[0].tensors[a+2].x=e+60,_t[0].tensors[a+2].y=s+20,i.inputs=[a+0,a+1],i.outputs=[a+2]),_t[0].add_operator(i)}CanvasRenderingContext2D.prototype.roundRect=function(t,e,s,n,o){return s<0&&(t-=s=-s),n<0&&(e-=n=-n),s<2*o&&(o=s/2),n<2*o&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+s,e,t+s,e+n,o),this.arcTo(t+s,e+n,t,e+n,o),this.arcTo(t,e+n,t,e,o),this.arcTo(t,e,t+s,e,o),this.closePath(),this},_t.push(new K);var bt=[],kt=new class{constructor(t,e,s,n,o=!1){this.x=t,this.y=e,this.w=s,this.h=n,this.bool=o}press(t,e){this.x<=t&&this.x+this.w>=t&&this.y<=e&&this.y+this.h>=e&&(this.bool=!this.bool)}}(20,20,20,20,!0);function Tt(t,e){let s=t.tensors[e];s.live?(lt.fillStyle="white",lt.lineWidth=1,lt.setLineDash([]),lt.strokeStyle="black"):(lt.fillStyle="rgba(255,255,255,0)",lt.lineWidth=1,lt.setLineDash([3,4]),lt.strokeStyle="Grey"),lt.beginPath(),s.scalar?lt.rect(s.x-5,s.y-5,10,10):lt.rect(s.x-pt,s.y-pt,20,20),lt.fill(),lt.stroke(),s.selected&&(lt.fillStyle="rgba(255,255,255,0)",lt.lineWidth=1,lt.strokeStyle="#5dd2f0",lt.setLineDash([]),lt.beginPath(),lt.roundRect(s.x-15,s.y-15,30,30,2),lt.stroke())}function Lt(t,e){let s,n,o,r,i=t.operators[e],a=lt.createLinearGradient(0,0,ut,ct);a.addColorStop(0,"#DE7521"),a.addColorStop(1,"#218ADE"),lt.fillStyle=a;switch(i.func){case 0:case 1:case 4:case 6:case 8:case 9:case 11:break;case 2:n=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],lt.beginPath(),lt.moveTo(r.x-pt,r.y-pt),lt.lineTo(r.x-pt,r.y+pt),lt.lineTo(n.x+pt,n.y+pt),lt.lineTo(n.x+pt,n.y-pt),lt.closePath(),lt.fill(),lt.beginPath(),lt.moveTo(r.x-pt,r.y-pt),lt.lineTo(r.x-pt,r.y+pt),lt.lineTo(o.x+pt,o.y+pt),lt.lineTo(o.x+pt,o.y-pt),lt.closePath(),lt.fill();break;case 3:n=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]];break;case 5:n=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],lt.beginPath(),lt.moveTo(r.x-pt,r.y-pt),lt.lineTo(r.x-pt,r.y+pt),lt.lineTo(n.x+pt,n.y+pt),lt.lineTo(n.x+pt,n.y-pt),lt.lineTo(o.x-pt,o.y+pt),lt.lineTo(o.x+pt,o.y+pt),lt.closePath(),lt.fill();break;case 7:s=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],lt.beginPath(),lt.moveTo(r.x-pt,r.y-5),lt.lineTo(r.x-pt,r.y+5),lt.lineTo(s.x+pt,s.y+pt),lt.lineTo(s.x+pt,s.y-pt),lt.closePath(),lt.fill();break;case 10:n=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],lt.beginPath(),lt.moveTo(n.x+pt,n.y-pt+4),lt.lineTo(n.x+pt,n.y-pt),lt.lineTo(o.x-pt,o.y+pt),lt.lineTo(o.x+pt,o.y+pt),lt.lineTo(r.x-pt,r.y-pt),lt.lineTo(r.x-pt,r.y-pt+4);for(let t=1;t<5;t+=2)lt.lineTo(n.x+pt,n.y-pt+4*t),lt.lineTo(n.x+pt,n.y-pt+4*(t+1)),lt.lineTo(r.x-pt,r.y-pt+4*(t+1)),lt.lineTo(r.x-pt,r.y-pt+4*(t+2));lt.lineTo(n.x+pt,n.y+pt),lt.closePath(),lt.fill();break;case 12:s=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],lt.beginPath(),lt.moveTo(s.x+pt,s.y+pt),lt.lineTo(s.x+pt,s.y-pt),lt.lineTo(r.x-pt,r.y-pt),lt.lineTo(r.x-pt,r.y-pt+4);for(let t=1;t<5;t+=2)lt.lineTo((r.x+s.x)/2,(r.y+s.y)/2-pt+4*t),lt.lineTo((r.x+s.x)/2,(r.y+s.y)/2-pt+4*(t+1)),lt.lineTo(r.x-pt,r.y-pt+4*(t+1)),lt.lineTo(r.x-pt,r.y-pt+4*(t+2));lt.closePath(),lt.fill();break;default:console.log("Invalid operator types")}}function Ct(){if(at.width=at.getBoundingClientRect().width,at.height=at.getBoundingClientRect().height,ut=at.width,ct=at.height,$t){for(let t=-10;t<ut;t+=20)lt.moveTo(t,0),lt.lineTo(t,ct);for(let t=-10;t<ct;t+=20)lt.moveTo(0,t),lt.lineTo(ut,t);lt.lineWidth=.5,lt.setLineDash([1,4]),lt.strokeStyle="Grey",lt.stroke()}for(let t=0;t<_t[0].operators.length;t++)Lt(_t[0],t);for(let t=0;t<_t[0].tensors.length;t++)Tt(_t[0],t),_t[0].tensors[t].selected&&!gt&&ht&&nt(_t[0],t,_t[0].tensors[t].tx+xt-mt,_t[0].tensors[t].ty+yt-vt,$t);gt&&(lt.fillStyle="rgba(255,255,255,0)",lt.lineWidth=1,lt.strokeStyle="#5dd2f0",lt.setLineDash([3,2]),lt.beginPath(),lt.roundRect(mt,vt,xt-mt,yt-vt,2),lt.stroke()),lt.fillStyle="black",lt.fillRect(bt[0].x,bt[0].y,bt[0].w,bt[0].h),$t=bt[0].bool,window.requestAnimationFrame(Ct)}function Pt(){for(let t=0;t<_t[0].tensors.length;t++)_t[0].tensors[t].selected=!1}function Et(t){let e=ot(_t[0],xt,yt);console.log("Clicked Indices ",e);for(let t=0;t<e.length;t++){var s=e[t],n=_t[0].tensors[s];null==n.output_of||0==n.input_to.length?n.live=!n.live:(console.log("Unmerge"),rt(_t[0],s))}}function Mt(t){gt=!1;for(let t=0;t<_t[0].tensors.length;t++)for(let n=0;n<_t[0].tensors.length;n++)if(n!=t){var e=_t[0].tensors[t],s=_t[0].tensors[n];Math.abs(e.x-s.x)<20&&Math.abs(e.y-s.y)<20&&it(_t[0],t,n)}ht=!1,ft=-1,dt=-1;let n=ot(_t[0],xt,yt);n.length>=2&&it(_t[0],n[0],n[1])}function St(t){ht=!0;for(let t=0;t<_t[0].tensors.length;t++)_t[0].tensors[t].tx=_t[0].tensors[t].x,_t[0].tensors[t].ty=_t[0].tensors[t].y;mt=xt,vt=yt;let e=ot(_t[0],xt,yt);0!=e.length&&(ft=e[0],_t[0].tensors[ft].selected||Pt(),_t[0].tensors[ft].selected=!0);let s=function(t,e,s){var n=[];for(let x=0;x<t.operators.length;x++){var o=t.operators[x],r=!1,i=!1,a=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:i=!0;break;case 4:case 5:case 10:a=!0;break;case 6:case 7:case 8:case 9:case 12:r=!0}var l=t.tensors[o.inputs[0]],u=t.tensors[o.inputs[1]],c=t.tensors[o.outputs[0]],p=1e6,h=-1e6,f=1e6,d=-1e6;r&&(p=l.x+et,h=c.x-et,f=Math.min(l.y-et,c.y-et),d=Math.max(l.y+et,c.y+et)),a&&(p=l.x+et,h=c.x-et,f=u.y+et,d=Math.max(l.y+et,c.y+et)),i&&(p=Math.min(l.x+et,u.x+et),h=c.x-et,f=u.y-et,d=l.y+et),p<e&&h>e&&f<s&&d>s&&n.push(x)}return n}(_t[0],xt,yt);if(0!=s.length&&0==e.length){dt=s[0];var n=_t[0].operators[dt];for(let t=0;t<n.inputs.length;t++)_t[0].tensors[n.inputs[t]].selected=!0;for(let t=0;t<n.outputs.length;t++)_t[0].tensors[n.outputs[t]].selected=!0}0==e.length&&0==s.length&&(gt=!0,Pt());for(let t=0;t<bt.length;t++)bt[t].press(xt,yt)}function Rt(t){if(t.offsetX?(xt=t.offsetX,yt=t.offsetY):t.layerX&&(xt=t.layerX,yt=t.layerY),gt)for(let t=0;t<_t[0].tensors.length;t++){var e=_t[0].tensors[t];Math.abs(e.x-(mt+xt)/2)<Math.abs(mt-(mt+xt)/2)&&Math.abs(e.y-(vt+yt)/2)<Math.abs(vt-(vt+yt)/2)?e.selected=!0:e.selected=!1}}function Dt(t,e,s){const n=t.slice();return n[22]=e[s],n}function At(e){let s,n,o,r,i,a,u,d,g=e[22].operator_type+"";return{c(){s=f("li"),n=f("p"),o=f("img"),i=x(g),a=y(),l(o.src,r=Gt)||v(o,"src",r),v(o,"alt","List icon."),_(o,"max-height","20px"),v(o,"class","svelte-1suewvk"),v(s,"id","list_item"),v(s,"class","svelte-1suewvk")},m(t,r){p(t,s,r),c(s,n),c(n,o),c(n,i),c(s,a),u||(d=m(s,"click",e[12]),u=!0)},p:t,d(t){t&&h(s),u=!1,d()}}}function Ot(e){let s,o,r,i,a,l;return{c(){s=x("Are you sure?\n\t\t\n\t\t"),o=f("button"),o.textContent="Yes",r=y(),i=f("button"),i.textContent="No",v(o,"class","green"),v(i,"class","green")},m(t,n){p(t,s,n),p(t,o,n),p(t,r,n),p(t,i,n),a||(l=[m(o,"click",e[0]),m(i,"click",e[13])],a=!0)},p:t,d(t){t&&h(s),t&&h(o),t&&h(r),t&&h(i),a=!1,n(l)}}}function Ut(e){let s,o,r,i,a,l,u,c,d;return{c(){s=x("How would you like to download your neural network? "),o=f("br"),r=f("br"),i=y(),a=f("button"),a.textContent="Pytorch",l=y(),u=f("button"),u.textContent="Tensorflow",v(a,"class","green"),v(u,"class","green")},m(t,n){p(t,s,n),p(t,o,n),p(t,r,n),p(t,i,n),p(t,a,n),p(t,l,n),p(t,u,n),c||(d=[m(a,"click",e[14]),m(u,"click",e[15])],c=!0)},p:t,d(t){t&&h(s),t&&h(o),t&&h(r),t&&h(i),t&&h(a),t&&h(l),t&&h(u),c=!1,n(d)}}}function qt(t){let e;return{c(){e=f("h1"),e.textContent="Tutorial"},m(t,s){p(t,e,s)},d(t){t&&h(e)}}}function Bt(e){let s,o,r,i,a,l,u,c,d,_,g,$,w;return{c(){s=x("Add Operator: "),o=f("br"),r=f("br"),i=y(),a=f("button"),a.textContent="Dense",l=y(),u=f("button"),u.textContent="Convolutional",c=y(),d=f("button"),d.textContent="PReLU",_=y(),g=f("button"),g.textContent="Softmax",v(a,"class","option"),v(u,"class","option"),v(d,"class","option"),v(g,"class","option")},m(t,n){p(t,s,n),p(t,o,n),p(t,r,n),p(t,i,n),p(t,a,n),p(t,l,n),p(t,u,n),p(t,c,n),p(t,d,n),p(t,_,n),p(t,g,n),$||(w=[m(a,"click",e[1]),m(u,"click",e[2]),m(d,"click",e[3]),m(g,"click",e[4])],$=!0)},p:t,d(t){t&&h(s),t&&h(o),t&&h(r),t&&h(i),t&&h(a),t&&h(l),t&&h(u),t&&h(c),t&&h(d),t&&h(_),t&&h(g),$=!1,n(w)}}}function zt(t){let e,s,n,o;return{c(){e=x("Edit Operator: "),s=f("br"),n=f("br"),o=x("\n\t\tAdd input, output, parameter shape blanks.")},m(t,r){p(t,e,r),p(t,s,r),p(t,n,r),p(t,o,r)},d(t){t&&h(e),t&&h(s),t&&h(n),t&&h(o)}}}function Nt(t){let e,s,o,r,i,a,u,d,g,$,w,b,k,T,L,C,P,E,M,S,R,D,A,O,W,j,G,I,X,F,H,Y,K,Q,V,Z,tt,et,st,nt,ot,rt,it,at,lt,ut=t[5],ct=[];for(let e=0;e<ut.length;e+=1)ct[e]=At(Dt(t,ut,e));return Q=new J({props:{id:"clear",$$slots:{default:[Ot]},$$scope:{ctx:t}}}),Z=new J({props:{id:"generate",$$slots:{default:[Ut]},$$scope:{ctx:t}}}),et=new J({props:{id:"tutorial",$$slots:{default:[qt]},$$scope:{ctx:t}}}),nt=new J({props:{id:"add_operator",$$slots:{default:[Bt]},$$scope:{ctx:t}}}),rt=new J({props:{id:"edit_operator",$$slots:{default:[zt]},$$scope:{ctx:t}}}),{c(){e=f("main"),s=f("nav"),o=f("div"),r=f("ul"),i=f("li"),a=f("a"),u=f("img"),g=y(),$=f("li"),w=f("a"),b=x("Clear Canvas"),k=y(),T=f("li"),L=f("a"),C=x("Generate Code"),P=y(),E=f("li"),M=f("a"),S=x("?"),R=y(),D=f("div"),A=f("div"),O=f("div"),W=f("a"),j=x("+ add operator"),G=y(),I=f("div"),X=f("div"),X.innerHTML="<strong>Current Operators:</strong>",F=y();for(let t=0;t<ct.length;t+=1)ct[t].c();H=y(),Y=f("div"),Y.innerHTML='<canvas id="gui_canvas" class="svelte-1suewvk"></canvas>',K=y(),B(Q.$$.fragment),V=y(),B(Z.$$.fragment),tt=y(),B(et.$$.fragment),st=y(),B(nt.$$.fragment),ot=y(),B(rt.$$.fragment),l(u.src,d=Wt)||v(u,"src",d),v(u,"alt","Neurula logo."),_(u,"max-height","40px"),v(u,"class","svelte-1suewvk"),v(a,"href",jt),v(a,"class","svelte-1suewvk"),v(i,"class","svelte-1suewvk"),v(w,"href",void 0),v(w,"class","nav-button svelte-1suewvk"),v($,"class","svelte-1suewvk"),v(L,"href",void 0),v(L,"class","nav-button svelte-1suewvk"),v(T,"class","svelte-1suewvk"),v(M,"href",void 0),v(M,"class","nav-button svelte-1suewvk"),v(E,"class","svelte-1suewvk"),v(r,"class","navbar-list svelte-1suewvk"),v(o,"class","inner svelte-1suewvk"),v(s,"class","svelte-1suewvk"),v(W,"href",void 0),v(W,"class","nav-button svelte-1suewvk"),v(O,"id","toolbar_title"),v(O,"class","svelte-1suewvk"),v(X,"id","toolbar_add_operator"),v(X,"class","svelte-1suewvk"),v(I,"id","toolbar_list"),v(I,"class","svelte-1suewvk"),v(A,"id","toolbar"),v(A,"class","svelte-1suewvk"),v(Y,"id","canvas_container"),v(Y,"class","svelte-1suewvk"),v(D,"id","workspace"),v(D,"class","svelte-1suewvk"),v(e,"class","svelte-1suewvk")},m(n,l){p(n,e,l),c(e,s),c(s,o),c(o,r),c(r,i),c(i,a),c(a,u),c(r,g),c(r,$),c($,w),c(w,b),c(r,k),c(r,T),c(T,L),c(L,C),c(r,P),c(r,E),c(E,M),c(M,S),c(e,R),c(e,D),c(D,A),c(A,O),c(O,W),c(W,j),c(A,G),c(A,I),c(I,X),c(I,F);for(let t=0;t<ct.length;t+=1)ct[t].m(I,null);c(D,H),c(D,Y),c(e,K),z(Q,e,null),c(e,V),z(Z,e,null),c(e,tt),z(et,e,null),c(e,st),z(nt,e,null),c(e,ot),z(rt,e,null),it=!0,at||(lt=[m(w,"click",t[8]),m(L,"click",t[9]),m(M,"click",t[10]),m(W,"click",t[11])],at=!0)},p(t,[e]){if(32&e){let s;for(ut=t[5],s=0;s<ut.length;s+=1){const n=Dt(t,ut,s);ct[s]?ct[s].p(n,e):(ct[s]=At(n),ct[s].c(),ct[s].m(I,null))}for(;s<ct.length;s+=1)ct[s].d(1);ct.length=ut.length}const s={};33554432&e&&(s.$$scope={dirty:e,ctx:t}),Q.$set(s);const n={};33554432&e&&(n.$$scope={dirty:e,ctx:t}),Z.$set(n);const o={};33554432&e&&(o.$$scope={dirty:e,ctx:t}),et.$set(o);const r={};33554432&e&&(r.$$scope={dirty:e,ctx:t}),nt.$set(r);const i={};33554432&e&&(i.$$scope={dirty:e,ctx:t}),rt.$set(i)},i(t){it||(U(Q.$$.fragment,t),U(Z.$$.fragment,t),U(et.$$.fragment,t),U(nt.$$.fragment,t),U(rt.$$.fragment,t),it=!0)},o(t){q(Q.$$.fragment,t),q(Z.$$.fragment,t),q(et.$$.fragment,t),q(nt.$$.fragment,t),q(rt.$$.fragment,t),it=!1},d(t){t&&h(e),function(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}(ct,t),N(Q),N(Z),N(et),N(nt),N(rt),at=!1,n(lt)}}}bt.push(kt);let Wt="./transparent_bar_logo.png",jt="http://127.0.0.1:8000",Gt="https://cdn-icons-png.flaticon.com/512/2103/2103633.png";function It(t){var e;e=()=>{(at=document.getElementById("gui_canvas")).addEventListener("mousedown",St,!1),at.addEventListener("mousemove",Rt,!1),at.addEventListener("mouseup",Mt,!1),at.addEventListener("dblclick",Et,!1),lt=at.getContext("2d"),at.width=at.getBoundingClientRect().width,at.height=at.getBoundingClientRect().height,ut=at.width,ct=at.height,window.requestAnimationFrame(Ct)},w().$$.on_mount.push(e);function s(t){}function n(t){}return[function(){F("clear").close(1),_t[0]=new K},function(){wt(5),F("add_operator").close(1)},function(){wt(10),F("add_operator").close(1)},function(){wt(12),F("add_operator").close(1)},function(){wt(7),F("add_operator").close(1)},[{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"}],s,n,()=>F("clear").open(s),()=>F("generate").open(n),()=>F("tutorial").open(),()=>F("add_operator").open(),()=>F("edit_operator").open(),()=>F("clear").close(0),()=>F("generate").close(1),()=>F("generate").close(2)]}return new class extends G{constructor(t){super(),j(this,t,It,Nt,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
