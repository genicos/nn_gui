var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,a;function l(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function u(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function x(){return d(" ")}function y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e,n){t.classList[n?"add":"remove"](e)}function g(t){a=t}function v(){if(!a)throw new Error("Function called outside component initialization");return a}const w=[],b=[],$=[],k=[],T=Promise.resolve();let L=!1;function M(t){$.push(t)}const E=new Set;let C=0;function P(){const t=a;do{for(;C<w.length;){const t=w[C];C++,g(t),S(t.$$)}for(g(null),w.length=0,C=0;b.length;)b.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];E.has(e)||(E.add(e),e())}$.length=0}while(w.length);for(;k.length;)k.pop()();L=!1,E.clear(),g(t)}function S(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const R=new Set;let q;function A(t,e){t&&t.i&&(R.delete(t),t.i(e))}function U(t,e,n,s){if(t&&t.o){if(R.has(t))return;R.add(t),undefined.c.push((()=>{R.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function O(t){t&&t.c()}function B(t,n,r,i){const{fragment:a,on_mount:l,on_destroy:u,after_update:c}=t.$$;a&&a.m(n,r),i||M((()=>{const n=l.map(e).filter(o);u?u.push(...n):s(n),t.$$.on_mount=[]})),c.forEach(M)}function D(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(w.push(t),L||(L=!0,T.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(e,o,r,i,l,u,c,f=[-1]){const h=a;g(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||h.$$.root};c&&c(d.root);let x=!1;if(d.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),x&&z(e,t)),n})):[],d.update(),x=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&A(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),P()}g(h)}class j{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t){let e,n,o,r,i,a,d,g,v,w,b;const $=t[5].default,k=function(t,e,n,s){if(t){const o=l(t,e,n,s);return t[0](o)}}($,t,t[4],null);return{c(){e=f("div"),n=f("div"),o=h("svg"),r=h("circle"),i=h("line"),a=h("line"),d=x(),g=f("div"),k&&k.c(),m(r,"cx","6"),m(r,"cy","6"),m(r,"r","6"),m(i,"x1","3"),m(i,"y1","3"),m(i,"x2","9"),m(i,"y2","9"),m(i,"class","svelte-1q0isnv"),m(a,"x1","9"),m(a,"y1","3"),m(a,"x2","3"),m(a,"y2","9"),m(a,"class","svelte-1q0isnv"),m(o,"id","close"),m(o,"viewBox","0 0 12 12"),m(o,"class","svelte-1q0isnv"),m(g,"id","modal-content"),m(g,"class","svelte-1q0isnv"),m(n,"id","modal"),m(n,"class","svelte-1q0isnv"),m(e,"id","topModal"),m(e,"class","svelte-1q0isnv"),_(e,"visible",t[1])},m(s,l){var p;c(s,e,l),u(e,n),u(n,o),u(o,r),u(o,i),u(o,a),u(n,d),u(n,g),k&&k.m(g,null),t[7](e),v=!0,w||(b=[y(o,"click",t[6]),y(n,"click",(p=F,function(t){return t.stopPropagation(),p.call(this,t)})),y(e,"click",t[8])],w=!0)},p(t,[n]){k&&k.p&&(!v||16&n)&&function(t,e,n,s,o,r){if(o){const i=l(e,n,s,r);t.p(i,o)}}(k,$,t,t[4],v?function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}($,t[4],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),2&n&&_(e,"visible",t[1])},i(t){v||(A(k,t),v=!0)},o(t){U(k,t),v=!1},d(n){n&&p(e),k&&k.d(n),t[7](null),w=!1,s(b)}}}const I={};function X(t=""){return I[t]}const F=()=>{};function G(t,e,n){let s,o,r,{$$slots:i={},$$scope:a}=e,l=!1,{id:u=""}=e;function c(t){"Escape"==t.key&&q==s&&p()}function p(t){l&&(window.removeEventListener("keydown",c),q=o,null==q&&(document.body.style.overflow=""),n(1,l=!1),r&&r(t))}var f;I[u]={open:function(t){r=t,l||(o=q,q=s,window.addEventListener("keydown",c),document.body.style.overflow="hidden",n(1,l=!0),document.body.appendChild(s))},close:p},f=()=>{delete I[u],window.removeEventListener("keydown",c)},v().$$.on_destroy.push(f);return t.$$set=t=>{"id"in t&&n(3,u=t.id),"$$scope"in t&&n(4,a=t.$$scope)},[s,l,p,u,a,i,()=>p(),function(t){b[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},()=>p()]}class Y extends j{constructor(t){super(),N(this,t,G,H,r,{id:3})}}class W{constructor(t,e){this.scalar=!1,this.live=t||!1,e?this.form=e:e=[],this.x=0,this.y=0,this.tx=0,this.ty=0,this.input_to=[],this.output_of=null}calc_size(){if(this.form){var t=1;for(let e=0;e<this.form.length;e++)t*=this.form[e];this.size=t}else this.size=0;return this.size}}class J{constructor(t){this.inputs=[],this.outputs=[],this.func=t,this.size=null,this.network=null}clone(){var t=new J(this.func);return t.inputs=[...this.inputs],t.outputs=[...this.outputs],t.network=this.network,t}}class K{constructor(t,e){this.name=t,this.num_inputs=e}calc_form(t,e){var n=[];switch(console.log(this.name),this.name){case"identity":case"add":case"subtract":case"scale":case"softmax":case"hardmax":case"ReLU":case"LeakyReLU":case"Leaky to ReLU":n.push(e.tensors[t[0]].form);break;case"full":var s=e.tensors[t[0]].form,o=e.tensors[t[1]].form,r=1;for(let t=0;t<s.length;t++)r*=s[t];var i=1;for(let t=0;t<o.length;t++)i*=o[t];(a=[]).push(i/r),n.push(a);break;case"amass":case"max":(a=[]).push(1),n.push(a);break;case"convolution":s=e.tensors[t[0]].form,o=e.tensors[t[1]].form;var a=[];for(let t=0;t<s.length;t++)o.length<=t?a.push(s[t]):a.push(s[t]-o[t]+1);n.push(a);break;case"squared dist":n.push([1])}return n}}var Q=Array.apply(null,Array(12)).map((function(){}));Q[0]=new K("abstraction",0),Q[1]=new K("identity",1),Q[2]=new K("add",2),Q[3]=new K("subtract",2),Q[4]=new K("scale",2),Q[5]=new K("full",2),Q[6]=new K("amass",1),Q[7]=new K("softmax",1),Q[8]=new K("hardmax",1),Q[9]=new K("max",1),Q[10]=new K("convolution",2),Q[11]=new K("squared dist",2),Q[12]=new K("PReLU",1),Q[13]=new K("LeakyReLU",1),Q[14]=new K("Leaky to ReLU",1);const V=10;function Z(t,e,n){var s={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4},o=t.operators[e],r=!1;for(let t=0;t<o.outputs.length;t++)o.outputs[t]==n&&(r=!0);var i=0;if(!r)for(let t=0;t<o.inputs.length;t++)o.inputs[t]==n&&(i=t);var a=!1,l=!1,u=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:l=!0;break;case 4:case 5:case 10:u=!0;break;case 6:case 7:case 8:case 9:case 12:a=!0}var c=t.tensors[o.inputs[0]],p=t.tensors[o.inputs[1]],f=t.tensors[o.outputs[0]];if(a&&(r?s.x_min=c.x+20:s.x_max=f.x-20),u)if(r)s.x_min=p.x+20,s.y_min=p.y+20;else if(1==i){s.x_min=c.x+20,s.x_max=f.x-20;var h=Math.min(f.y,c.y);s.y_max=h-20}else s.x_max=p.x-20,s.y_min=p.y+20;if(l)if(r){var d=Math.max(c.x,p.x);s.x_min=d+20}else if(1==i){s.x_max=f.x-20;h=Math.min(f.y,c.y);s.y_max=h-20}else{s.x_max=f.x-20;var x=Math.max(f.y,p.y);s.y_min=x+20}return s}function tt(t,e,n,s,o=!1){t.tensors[e].x=n,t.tensors[e].y=s,o&&(t.tensors[e].x-=t.tensors[e].x%20,t.tensors[e].y-=t.tensors[e].y%20);var r={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4};for(let n=0;n<t.tensors[e].input_to.length;n++){let s=Z(t,t.tensors[e].input_to[n],e);r.x_min=Math.max(r.x_min,s.x_min),r.x_max=Math.min(r.x_max,s.x_max),r.y_min=Math.max(r.y_min,s.y_min),r.y_max=Math.min(r.y_max,s.y_max)}if(null!=t.tensors[e].output_of){let n=Z(t,t.tensors[e].output_of,e);r.x_min=Math.max(r.x_min,n.x_min),r.x_max=Math.min(r.x_max,n.x_max),r.y_min=Math.max(r.y_min,n.y_min),r.y_max=Math.min(r.y_max,n.y_max)}t.tensors[e].x<r.x_min&&(t.tensors[e].x=r.x_min),t.tensors[e].x>r.x_max&&(t.tensors[e].x=r.x_max),t.tensors[e].y<r.y_min&&(t.tensors[e].y=r.y_min),t.tensors[e].y>r.y_max&&(t.tensors[e].y=r.y_max)}function et(t,e,n){var s=[];for(let o=0;o<t.tensors.length;o++)t.tensors[o].x-V<e&&t.tensors[o].x+V>e&&t.tensors[o].y-V<n&&t.tensors[o].y+V>n&&s.push(o);return s}function nt(t,e){var n=t.tensors[e],s=n.input_to;n.input_to=[];for(let l=0;l<s.length;l++){var o=s[l],r=t.operators[o],i=t.tensors.length;t.add_tensor(new W(!0));var a=r.inputs.findIndex((t=>t==e));r.inputs[a]=i,t.tensors[i].x=n.x+20,t.tensors[i].y=n.y,t.tensors[i].input_to=[o],t.tensors[i].output_of=null,t.tensors[i].live=!1}n.x-=20,n.live=!1}function st(t,e,n){if(t.tensors[e].live&&t.tensors[n].live)return void console.log("Both merged tensors are live, so don't do anything.");let s=t.tensors[e],o=t.tensors[n],r=n,i=e;if(null!=s.output_of&&null==o.output_of);else{if(null==o.output_of||null!=s.output_of)return void console.log("Error merging, only one input must have an output");var a=o;o=s,s=a,r=e,i=n}if(console.log(s.output_of,o.input_to),s.output_of==o.input_to)return void console.log("Error merging, these are input and output of the same function");let l=t.operators[o.input_to].inputs.indexOf(r);t.operators[o.input_to].inputs[l]=i,s.input_to=o.input_to,s.live=!0,function(t,e){for(let n=0;n<t.operators.length;n++){for(let s=0;s<t.operators[n].inputs.length;s++)t.operators[n].inputs[s]>e&&(t.operators[n].inputs[s]-=1);for(let s=0;s<t.operators[n].outputs.length;s++)t.operators[n].outputs[s]>e&&(t.operators[n].outputs[s]-=1)}t.tensors.splice(e,1)}(t,r)}var ot=0,rt=0,it=0,at=0;const lt=10;var ut=-1,ct=-1,pt=0,ft=0,ht=0,dt=0,xt=[];xt.push(new class{constructor(){this.tensors=[],this.operators=[],this.input_tensors=[],this.param_tensors=[],this.output_tensors=[],this.truth_tensors=[],this.loss=null}add_tensor(t){this.tensors.push(t)}add_operator(t){var e=t.clone();this.operators.push(e);for(let t=0;t<e.inputs.length;t++)this.tensors[e.inputs[t]].input_to.push(this.operators.length-1);for(let t=0;t<e.outputs.length;t++)this.tensors[e.outputs[t]].output_of=this.operators.length-1}update_tensors(){for(let t=0;t<this.tensors.length;t++)this.tensors[t].input_to=[],this.tensors[t].output_of=null;for(let t=0;t<this.operators.length;t++){for(let e=0;e<this.operators[t].inputs.length;e++)this.tensors[this.operators[t].inputs[e]].input_to.push(t);for(let e=0;e<this.operators[t].outputs.length;e++)this.tensors[this.operators[t].outputs[e]].output_of=t}}expand(){for(let a=0;a<this.operators.length;a++)if(0==this.operators[a].func&&this.operators[a].network){var t=this.operators[a].network;t.expand();var e=this.operators[a],n=this.operators.length;this.operators[a]=t.operators[0];for(let e=1;e<t.operators.length;e++)this.add_operator(t.operators[e]);for(let l=0;l<t.tensors.length;l++){var s=l;if(t.input_tensors.includes(l)){var o=t.input_tensors.indexOf(l);s=e.inputs[o]}else if(t.output_tensors.includes(l)){o=t.output_tensors.indexOf(l);s=e.outputs[o]}else this.add_tensor(t.tensors[l]),s=this.tensors.length-1;for(let e=0;e<t.tensors[l].input_to.length;e++){var r=t.tensors[l].input_to[e],i=t.operators[r].inputs.indexOf(l);0==r?this.operators[a].inputs[i]=s:this.operators[r+n-1].inputs[i]=s}if(t.tensors[l].output_of||0==t.tensors[l].output_of){r=t.tensors[l].output_of,i=t.operators[r].outputs.indexOf(l);0==r?this.operators[a].outputs[i]=s:this.operators[r+n-1].outputs[i]=s}}this.update_tensors()}}to_string(){var t="";t+="Tensors: \n";for(let e=0;e<this.tensors.length;e++){t+="\t"+e+":\n",this.tensors[e].form&&(t+="\t\tform: "+String(this.tensors[e].form)+"\n"),t+="\t\tinput_to:\n";for(let n=0;n<this.tensors[e].input_to.length;n++)t+="\t\t\t"+this.tensors[e].input_to[n]+"\n";t+="\t\toutput_of\n",t+="\t\t\t"+this.tensors[e].output_of+"\n"}t+="Operators: \n";for(let e=0;e<this.operators.length;e++){t+="\t"+e+":\n",t+="\t\tinputs:\n";for(let n=0;n<this.operators[e].inputs.length;n++)t+="\t\t\t"+this.operators[e].inputs[n]+"\n";t+="\t\toutputs:\n";for(let n=0;n<this.operators[e].outputs.length;n++)t+="\t\t\t"+this.operators[e].outputs[n]+"\n";t+="\t\tfunc: "+this.operators[e].func+"\n"}t+="input_tensors:\n";for(let e=0;e<this.input_tensors.length;e++)t+="\t"+this.input_tensors[e]+"\n";t+="param_tensors:\n";for(let e=0;e<this.param_tensors.length;e++)t+="\t"+this.param_tensors[e]+"\n";t+="output_tensors:\n";for(let e=0;e<this.output_tensors.length;e++)t+="\t"+this.output_tensors[e]+"\n";return t}}),xt[0].add_tensor(new W(!1)),xt[0].tensors[0].x=200,xt[0].tensors[0].y=200,xt[0].add_tensor(new W(!1)),xt[0].tensors[1].x=100,xt[0].tensors[1].y=200,xt[0].add_tensor(new W(!1)),xt[0].tensors[2].x=150,xt[0].tensors[2].y=150;let yt=new J;yt.inputs=[1,2],yt.outputs=[0],yt.func=5,xt[0].add_operator(yt),xt[0].add_tensor(new W(!0)),xt[0].tensors[3].x=400,xt[0].tensors[3].y=200,xt[0].add_tensor(new W(!0)),xt[0].tensors[4].x=300,xt[0].tensors[4].y=200,xt[0].add_tensor(new W(!1)),xt[0].tensors[5].x=350,xt[0].tensors[5].y=150,xt[0].add_tensor(new W(!0)),xt[0].tensors[6].x=350,xt[0].tensors[6].y=350;let mt=new J;mt.inputs=[4,5],mt.outputs=[3],mt.func=2,xt[0].add_operator(mt),xt[0].add_tensor(new W(!0)),xt[0].tensors[7].x=500,xt[0].tensors[7].y=200,xt[0].add_tensor(new W(!0)),xt[0].tensors[8].x=400,xt[0].tensors[8].y=200,xt[0].add_tensor(new W(!0)),xt[0].tensors[9].x=450,xt[0].tensors[9].y=150,xt[0].add_tensor(new W(!0)),xt[0].tensors[10].x=450,xt[0].tensors[10].y=350;let _t=new J;_t.inputs=[8,9],_t.outputs=[7],_t.func=5,xt[0].add_operator(_t);let gt=new J;gt.inputs=[6],gt.outputs=[10],gt.func=7,xt[0].add_operator(gt),xt[0].add_tensor(new W(!0)),xt[0].tensors[11].x=400,xt[0].tensors[11].y=400,xt[0].add_tensor(new W(!0)),xt[0].tensors[12].x=500,xt[0].tensors[12].y=400;let vt=new J;function wt(t,e){let n=t.tensors[e];n.live?(rt.fillStyle="white",rt.lineWidth=1,rt.setLineDash([]),rt.strokeStyle="black"):(rt.fillStyle="rgba(255,255,255,0)",rt.lineWidth=1,rt.setLineDash([3,4]),rt.strokeStyle="Grey"),rt.beginPath(),n.scalar?rt.rect(n.x-5,n.y-5,10,10):rt.rect(n.x-lt,n.y-lt,20,20),rt.fill(),rt.stroke()}function bt(t,e){let n,s,o,r,i=t.operators[e],a=rt.createLinearGradient(0,0,it,at);switch(a.addColorStop(0,"#DE7521"),a.addColorStop(1,"#218ADE"),rt.fillStyle=a,i.func){case 0:case 1:case 4:case 6:case 8:case 9:case 10:case 11:break;case 2:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],rt.beginPath(),rt.moveTo(r.x-lt,r.y-lt),rt.lineTo(r.x-lt,r.y+lt),rt.lineTo(s.x+lt,s.y+lt),rt.lineTo(s.x+lt,s.y-lt),rt.closePath(),rt.fill(),rt.beginPath(),rt.moveTo(r.x-lt,r.y-lt),rt.lineTo(r.x-lt,r.y+lt),rt.lineTo(o.x+lt,o.y+lt),rt.lineTo(o.x+lt,o.y-lt),rt.closePath(),rt.fill();break;case 3:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]];break;case 5:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],rt.beginPath(),rt.moveTo(r.x-lt,r.y-lt),rt.lineTo(r.x-lt,r.y+lt),rt.lineTo(s.x+lt,s.y+lt),rt.lineTo(s.x+lt,s.y-lt),rt.lineTo(o.x-lt,o.y+lt),rt.lineTo(o.x+lt,o.y+lt),rt.closePath(),rt.fill();break;case 7:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],rt.beginPath(),rt.moveTo(r.x-lt,r.y-5),rt.lineTo(r.x-lt,r.y+5),rt.lineTo(n.x+lt,n.y+lt),rt.lineTo(n.x+lt,n.y-lt),rt.closePath(),rt.fill();break;case 12:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],rt.beginPath(),rt.moveTo(n.x+lt,n.y+lt),rt.lineTo(n.x+lt,n.y-lt);let e=4;rt.lineTo(r.x-lt,r.y-lt),rt.lineTo(r.x-lt,r.y-lt+20/(2*e-1));for(let t=1;t<2*e-1;t+=2)rt.lineTo((r.x+n.x)/2,(r.y+n.y)/2-lt+20/(2*e-1)*t),rt.lineTo((r.x+n.x)/2,(r.y+n.y)/2-lt+20/(2*e-1)*(t+1)),rt.lineTo(r.x-lt,r.y-lt+20/(2*e-1)*(t+1)),rt.lineTo(r.x-lt,r.y-lt+20/(2*e-1)*(t+2));rt.closePath(),rt.fill();break;default:console.log("Invalid operator types")}}function $t(){ot.width=ot.getBoundingClientRect().width,ot.height=ot.getBoundingClientRect().height,it=ot.width,at=ot.height;for(let t=0;t<xt[0].operators.length;t++)bt(xt[0],t);for(let t=0;t<xt[0].tensors.length;t++)wt(xt[0],t);if(-1!=ut)tt(xt[0],ut,pt,ft);else if(-1!=ct){var t=xt[0].operators[ct];for(let e=0;e<t.inputs.length;e++)tt(xt[0],t.inputs[e],xt[0].tensors[t.inputs[e]].tx+pt-ht,xt[0].tensors[t.inputs[e]].ty+ft-dt);for(let e=0;e<t.outputs.length;e++)tt(xt[0],t.outputs[e],xt[0].tensors[t.outputs[e]].tx+pt-ht,xt[0].tensors[t.outputs[e]].ty+ft-dt)}window.requestAnimationFrame($t)}function kt(t){let e=et(xt[0],pt,ft);console.log("Clicked Indices ",e);for(let t=0;t<e.length;t++){var n=e[t],s=xt[0].tensors[n];null==s.output_of||0==s.input_to.length?s.live=!s.live:(console.log("Unmerge"),nt(xt[0],n))}}function Tt(t){if(-1!=ct){for(let t=0;t<xt[0].operators[ct].inputs.length;t++)for(let o=0;o<xt[0].tensors.length;o++){if(o!=(s=xt[0].operators[ct].inputs[t])){var e=xt[0].tensors[s],n=xt[0].tensors[o];Math.abs(e.x-n.x)<20&&Math.abs(e.y-n.y)<20&&st(xt[0],s,o)}}for(let t=0;t<xt[0].operators[ct].outputs.length;t++)for(let o=0;o<xt[0].tensors.length;o++){var s;if(o!=(s=xt[0].operators[ct].outputs[t])){e=xt[0].tensors[s],n=xt[0].tensors[o];Math.abs(e.x-n.x)<20&&Math.abs(e.y-n.y)<20&&st(xt[0],s,o)}}}ut=-1,ct=-1;let o=et(xt[0],pt,ft);o.length>=2&&st(xt[0],o[0],o[1])}function Lt(t){let e=et(xt[0],pt,ft);0!=e.length&&(ut=e[0]);let n=function(t,e,n){var s=[];for(let x=0;x<t.operators.length;x++){var o=t.operators[x],r=!1,i=!1,a=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:i=!0;break;case 4:case 5:case 10:a=!0;break;case 6:case 7:case 8:case 9:case 12:r=!0}var l=t.tensors[o.inputs[0]],u=t.tensors[o.inputs[1]],c=t.tensors[o.outputs[0]],p=1e6,f=-1e6,h=1e6,d=-1e6;r&&(p=l.x+V,f=c.x-V,h=Math.min(l.y-V,c.y-V),d=Math.max(l.y+V,c.y+V)),a&&(p=l.x+V,f=c.x-V,h=u.y+V,d=Math.max(l.y+V,c.y+V)),i&&(p=Math.min(l.x+V,u.x+V),f=c.x-V,h=u.y-V,d=l.y+V),p<e&&f>e&&h<n&&d>n&&s.push(x)}return s}(xt[0],pt,ft);if(0!=n.length){ct=n[0];var s=xt[0].operators[ct];for(let t=0;t<s.inputs.length;t++)xt[0].tensors[s.inputs[t]].tx=xt[0].tensors[s.inputs[t]].x,xt[0].tensors[s.inputs[t]].ty=xt[0].tensors[s.inputs[t]].y;for(let t=0;t<s.outputs.length;t++)xt[0].tensors[s.outputs[t]].tx=xt[0].tensors[s.outputs[t]].x,xt[0].tensors[s.outputs[t]].ty=xt[0].tensors[s.outputs[t]].y;ht=pt,dt=ft}}function Mt(t){t.offsetX?(pt=t.offsetX,ft=t.offsetY):t.layerX&&(pt=t.layerX,ft=t.layerY)}function Et(t,e,n){const s=t.slice();return s[13]=e[n],s}function Ct(e){let n,s,o,r,i=e[13].operator_type+"";return{c(){n=f("li"),s=f("p"),o=d(i),r=x(),m(n,"class","svelte-1gkb87w")},m(t,e){c(t,n,e),u(n,s),u(s,o),u(n,r)},p:t,d(t){t&&p(n)}}}function Pt(e){let n,o,r,i,a,l;return{c(){n=d("Are you sure?\n\t\t\n\t\t"),o=f("button"),o.textContent="Yes",r=x(),i=f("button"),i.textContent="No",m(o,"class","green"),m(i,"class","green")},m(t,s){c(t,n,s),c(t,o,s),c(t,r,s),c(t,i,s),a||(l=[y(o,"click",e[6]),y(i,"click",e[7])],a=!0)},p:t,d(t){t&&p(n),t&&p(o),t&&p(r),t&&p(i),a=!1,s(l)}}}function St(e){let n,o,r,i,a,l;return{c(){n=d("How would you like to download your neural network?\n\t\t\n\t\t"),o=f("button"),o.textContent="Pytorch",r=x(),i=f("button"),i.textContent="Tensorflow",m(o,"class","green"),m(i,"class","green")},m(t,s){c(t,n,s),c(t,o,s),c(t,r,s),c(t,i,s),a||(l=[y(o,"click",e[8]),y(i,"click",e[9])],a=!0)},p:t,d(t){t&&p(n),t&&p(o),t&&p(r),t&&p(i),a=!1,s(l)}}}function Rt(t){let e;return{c(){e=f("h1"),e.textContent="Tutorial"},m(t,n){c(t,e,n)},d(t){t&&p(e)}}}function qt(t){let e,n,o,r,a,l,h,_,g,v,w,b,$,k,T,L,M,E,C,P,S,R,q,z,N,j,H,I,X,F,G,W,J,K,Q,V,Z,tt,et,nt=t[0],st=[];for(let e=0;e<nt.length;e+=1)st[e]=Ct(Et(t,nt,e));return W=new Y({props:{id:"clear",$$slots:{default:[Pt]},$$scope:{ctx:t}}}),K=new Y({props:{id:"generate",$$slots:{default:[St]},$$scope:{ctx:t}}}),V=new Y({props:{id:"tutorial",$$slots:{default:[Rt]},$$scope:{ctx:t}}}),{c(){e=f("main"),n=f("nav"),o=f("div"),r=f("ul"),a=f("li"),l=f("a"),h=f("img"),g=x(),v=f("li"),w=f("a"),b=d("Clear Canvas"),$=x(),k=f("li"),T=f("a"),L=d("Generate Code"),M=x(),E=f("li"),C=f("a"),P=d("?"),S=x(),R=f("div"),q=f("div"),z=f("div"),z.innerHTML="<p><strong>Toolbar</strong></p>",N=x(),j=f("div"),H=f("div"),H.innerHTML="<i>Add operator</i>",I=x();for(let t=0;t<st.length;t+=1)st[t].c();var t,s,u,c,p,y;X=x(),F=f("div"),F.innerHTML='<canvas id="gui_canvas" class="svelte-1gkb87w"></canvas>',G=x(),O(W.$$.fragment),J=x(),O(K.$$.fragment),Q=x(),O(V.$$.fragment),t=h.src,s=_=At,i||(i=document.createElement("a")),i.href=s,t!==i.href&&m(h,"src",_),m(h,"alt","Neurula logo."),u=h,c="max-height",null===(p="40px")?u.style.removeProperty(c):u.style.setProperty(c,p,y?"important":""),m(l,"href",Ut),m(l,"class","svelte-1gkb87w"),m(a,"class","svelte-1gkb87w"),m(w,"href",void 0),m(w,"class","nav-button svelte-1gkb87w"),m(v,"class","svelte-1gkb87w"),m(T,"href",void 0),m(T,"class","nav-button svelte-1gkb87w"),m(k,"class","svelte-1gkb87w"),m(C,"href",void 0),m(C,"class","nav-button svelte-1gkb87w"),m(E,"class","svelte-1gkb87w"),m(r,"class","navbar-list svelte-1gkb87w"),m(o,"class","inner svelte-1gkb87w"),m(n,"class","svelte-1gkb87w"),m(z,"id","toolbar_title"),m(z,"class","svelte-1gkb87w"),m(H,"id","toolbar_add_operator"),m(H,"class","svelte-1gkb87w"),m(j,"id","toolbar_list"),m(j,"class","svelte-1gkb87w"),m(q,"id","toolbar"),m(q,"class","svelte-1gkb87w"),m(F,"id","canvas_container"),m(F,"class","svelte-1gkb87w"),m(R,"id","workspace"),m(R,"class","svelte-1gkb87w"),m(e,"class","svelte-1gkb87w")},m(s,i){c(s,e,i),u(e,n),u(n,o),u(o,r),u(r,a),u(a,l),u(l,h),u(r,g),u(r,v),u(v,w),u(w,b),u(r,$),u(r,k),u(k,T),u(T,L),u(r,M),u(r,E),u(E,C),u(C,P),u(e,S),u(e,R),u(R,q),u(q,z),u(q,N),u(q,j),u(j,H),u(j,I);for(let t=0;t<st.length;t+=1)st[t].m(j,null);u(R,X),u(R,F),u(e,G),B(W,e,null),u(e,J),B(K,e,null),u(e,Q),B(V,e,null),Z=!0,tt||(et=[y(w,"click",t[3]),y(T,"click",t[4]),y(C,"click",t[5])],tt=!0)},p(t,[e]){if(1&e){let n;for(nt=t[0],n=0;n<nt.length;n+=1){const s=Et(t,nt,n);st[n]?st[n].p(s,e):(st[n]=Ct(s),st[n].c(),st[n].m(j,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=nt.length}const n={};65536&e&&(n.$$scope={dirty:e,ctx:t}),W.$set(n);const s={};65536&e&&(s.$$scope={dirty:e,ctx:t}),K.$set(s);const o={};65536&e&&(o.$$scope={dirty:e,ctx:t}),V.$set(o)},i(t){Z||(A(W.$$.fragment,t),A(K.$$.fragment,t),A(V.$$.fragment,t),Z=!0)},o(t){U(W.$$.fragment,t),U(K.$$.fragment,t),U(V.$$.fragment,t),Z=!1},d(t){t&&p(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(st,t),D(W),D(K),D(V),tt=!1,s(et)}}}vt.inputs=[11],vt.outputs=[12],vt.func=12,xt[0].add_operator(vt);let At="./transparent_bar_logo.png",Ut="http://127.0.0.1:8000";function Ot(t){var e;e=()=>{(ot=document.getElementById("gui_canvas")).addEventListener("mousedown",Lt,!1),ot.addEventListener("mousemove",Mt,!1),ot.addEventListener("mouseup",Tt,!1),ot.addEventListener("dblclick",kt,!1),rt=ot.getContext("2d"),ot.width=ot.getBoundingClientRect().width,ot.height=ot.getBoundingClientRect().height,it=ot.width,at=ot.height,window.requestAnimationFrame($t)},v().$$.on_mount.push(e);function n(t){}function s(t){}return[[{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"},{operator_type:"Dense"},{operator_type:"PReLU"},{operator_type:"Softmax"},{operator_type:"Convolutional"}],n,s,()=>X("clear").open(n),()=>X("generate").open(s),()=>X("tutorial").open(),()=>X("clear").close(1),()=>X("clear").close(0),()=>X("generate").close(1),()=>X("generate").close(2)]}return new class extends j{constructor(t){super(),N(this,t,Ot,qt,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
