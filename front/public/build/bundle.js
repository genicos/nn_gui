var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,l;function a(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function u(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function c(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function m(){return x(" ")}function g(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){t.value=null==e?"":e}function _(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function b(t,e,n){t.classList[n?"add":"remove"](e)}function $(t){l=t}function w(){if(!l)throw new Error("Function called outside component initialization");return l}const k=[],T=[],C=[],j=[],q=Promise.resolve();let L=!1;function P(t){C.push(t)}const M=new Set;let S=0;function E(){const t=l;do{for(;S<k.length;){const t=k[S];S++,$(t),A(t.$$)}for($(null),k.length=0,S=0;T.length;)T.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];M.has(e)||(M.add(e),e())}C.length=0}while(k.length);for(;j.length;)j.pop()();L=!1,M.clear(),$(t)}function A(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const R=new Set;let O;function D(t,e){t&&t.i&&(R.delete(t),t.i(e))}function F(t,e,n,s){if(t&&t.o){if(R.has(t))return;R.add(t),undefined.c.push((()=>{R.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function U(t){t&&t.c()}function N(t,n,r,i){const{fragment:l,on_mount:a,on_destroy:u,after_update:c}=t.$$;l&&l.m(n,r),i||P((()=>{const n=a.map(e).filter(o);u?u.push(...n):s(n),t.$$.on_mount=[]})),c.forEach(P)}function B(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(k.push(t),L||(L=!0,q.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,r,i,a,u,c,p=[-1]){const f=l;$(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:o.target||f.$$.root};c&&c(d.root);let x=!1;if(d.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),x&&G(e,t)),n})):[],d.update(),x=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();o.intro&&D(e.$$.fragment),N(e,o.target,o.anchor,o.customElement),E()}$(f)}class z{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(t){let e,n,o,r,i,l,a,x,v,_,$;const w=t[5].default,k=function(t,e,n,s){if(t){const o=u(t,e,n,s);return t[0](o)}}(w,t,t[4],null);return{c(){e=f("div"),n=f("div"),o=d("svg"),r=d("circle"),i=d("line"),l=d("line"),a=m(),x=f("div"),k&&k.c(),y(r,"cx","6"),y(r,"cy","6"),y(r,"r","6"),y(i,"x1","3"),y(i,"y1","3"),y(i,"x2","9"),y(i,"y2","9"),y(i,"class","svelte-x94lxe"),y(l,"x1","9"),y(l,"y1","3"),y(l,"x2","3"),y(l,"y2","9"),y(l,"class","svelte-x94lxe"),y(o,"id","close"),y(o,"viewBox","0 0 12 12"),y(o,"class","svelte-x94lxe"),y(x,"id","modal-content"),y(x,"class","svelte-x94lxe"),y(n,"id","modal"),y(n,"class","svelte-x94lxe"),y(e,"id","topModal"),y(e,"class","svelte-x94lxe"),b(e,"visible",t[1])},m(s,u){var h;p(s,e,u),c(e,n),c(n,o),c(o,r),c(o,i),c(o,l),c(n,a),c(n,x),k&&k.m(x,null),t[7](e),v=!0,_||($=[g(o,"click",t[6]),g(n,"click",(h=X,function(t){return t.stopPropagation(),h.call(this,t)})),g(e,"click",t[8])],_=!0)},p(t,[n]){k&&k.p&&(!v||16&n)&&function(t,e,n,s,o,r){if(o){const i=u(e,n,s,r);t.p(i,o)}}(k,w,t,t[4],v?function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}(w,t[4],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),2&n&&b(e,"visible",t[1])},i(t){v||(D(k,t),v=!0)},o(t){F(k,t),v=!1},d(n){n&&h(e),k&&k.d(n),t[7](null),_=!1,s($)}}}const H={};function Y(t=""){return H[t]}const X=()=>{};function J(t,e,n){let s,o,r,{$$slots:i={},$$scope:l}=e,a=!1,{id:u=""}=e;function c(t){"Escape"==t.key&&O==s&&p()}function p(t){a&&(window.removeEventListener("keydown",c),O=o,null==O&&(document.body.style.overflow=""),n(1,a=!1),r&&r(t))}var h;H[u]={open:function(t){r=t,a||(o=O,O=s,window.addEventListener("keydown",c),document.body.style.overflow="hidden",n(1,a=!0),document.body.appendChild(s))},close:p},h=()=>{delete H[u],window.removeEventListener("keydown",c)},w().$$.on_destroy.push(h);return t.$$set=t=>{"id"in t&&n(3,u=t.id),"$$scope"in t&&n(4,l=t.$$scope)},[s,a,p,u,l,i,()=>p(),function(t){T[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},()=>p()]}class Q extends z{constructor(t){super(),W(this,t,J,I,r,{id:3})}}class K{constructor(){this.tensors=[],this.operators=[],this.input_tensors=[],this.param_tensors=[],this.output_tensors=[],this.truth_tensors=[],this.loss=null}add_tensor(t){this.tensors.push(t)}add_operator(t){var e=t.clone();this.operators.push(e);for(let t=0;t<e.inputs.length;t++)this.tensors[e.inputs[t]].input_to.push(this.operators.length-1);for(let t=0;t<e.outputs.length;t++)this.tensors[e.outputs[t]].output_of=this.operators.length-1}update_tensors(){for(let t=0;t<this.tensors.length;t++)this.tensors[t].input_to=[],this.tensors[t].output_of=null;for(let t=0;t<this.operators.length;t++){for(let e=0;e<this.operators[t].inputs.length;e++)this.tensors[this.operators[t].inputs[e]].input_to.push(t);for(let e=0;e<this.operators[t].outputs.length;e++)this.tensors[this.operators[t].outputs[e]].output_of=t}}expand(){for(let l=0;l<this.operators.length;l++)if(0==this.operators[l].func&&this.operators[l].network){var t=this.operators[l].network;t.expand();var e=this.operators[l],n=this.operators.length;this.operators[l]=t.operators[0];for(let e=1;e<t.operators.length;e++)this.add_operator(t.operators[e]);for(let a=0;a<t.tensors.length;a++){var s=a;if(t.input_tensors.includes(a)){var o=t.input_tensors.indexOf(a);s=e.inputs[o]}else if(t.output_tensors.includes(a)){o=t.output_tensors.indexOf(a);s=e.outputs[o]}else this.add_tensor(t.tensors[a]),s=this.tensors.length-1;for(let e=0;e<t.tensors[a].input_to.length;e++){var r=t.tensors[a].input_to[e],i=t.operators[r].inputs.indexOf(a);0==r?this.operators[l].inputs[i]=s:this.operators[r+n-1].inputs[i]=s}if(t.tensors[a].output_of||0==t.tensors[a].output_of){r=t.tensors[a].output_of,i=t.operators[r].outputs.indexOf(a);0==r?this.operators[l].outputs[i]=s:this.operators[r+n-1].outputs[i]=s}}this.update_tensors()}}to_string(){var t="";t+="Tensors: \n";for(let e=0;e<this.tensors.length;e++){t+="\t"+e+":\n",this.tensors[e].form&&(t+="\t\tform: "+String(this.tensors[e].form)+"\n"),t+="\t\tinput_to:\n";for(let n=0;n<this.tensors[e].input_to.length;n++)t+="\t\t\t"+this.tensors[e].input_to[n]+"\n";t+="\t\toutput_of\n",t+="\t\t\t"+this.tensors[e].output_of+"\n"}t+="Operators: \n";for(let e=0;e<this.operators.length;e++){t+="\t"+e+":\n",t+="\t\tinputs:\n";for(let n=0;n<this.operators[e].inputs.length;n++)t+="\t\t\t"+this.operators[e].inputs[n]+"\n";t+="\t\toutputs:\n";for(let n=0;n<this.operators[e].outputs.length;n++)t+="\t\t\t"+this.operators[e].outputs[n]+"\n";t+="\t\tfunc: "+this.operators[e].func+"\n"}t+="input_tensors:\n";for(let e=0;e<this.input_tensors.length;e++)t+="\t"+this.input_tensors[e]+"\n";t+="param_tensors:\n";for(let e=0;e<this.param_tensors.length;e++)t+="\t"+this.param_tensors[e]+"\n";t+="output_tensors:\n";for(let e=0;e<this.output_tensors.length;e++)t+="\t"+this.output_tensors[e]+"\n";return t}}class V{constructor(t,e){this.scalar=!1,this.live=t||!1,e?this.form=e:e=[],this.x=0,this.y=0,this.tx=0,this.ty=0,this.selected=!1,this.input_to=[],this.output_of=null}calc_size(){if(this.form){var t=1;for(let e=0;e<this.form.length;e++)t*=this.form[e];this.size=t}else this.size=0;return this.size}}class Z{constructor(t,e){this.name=t,this.num_inputs=e}calc_form(t,e){var n=[];switch(console.log(this.name),this.name){case"identity":case"add":case"subtract":case"scale":case"softmax":case"hardmax":case"ReLU":case"LeakyReLU":case"Leaky to ReLU":n.push(e.tensors[t[0]].form);break;case"full":var s=e.tensors[t[0]].form,o=e.tensors[t[1]].form,r=1;for(let t=0;t<s.length;t++)r*=s[t];var i=1;for(let t=0;t<o.length;t++)i*=o[t];(l=[]).push(i/r),n.push(l);break;case"amass":case"max":(l=[]).push(1),n.push(l);break;case"convolution":s=e.tensors[t[0]].form,o=e.tensors[t[1]].form;var l=[];for(let t=0;t<s.length;t++)o.length<=t?l.push(s[t]):l.push(s[t]-o[t]+1);n.push(l);break;case"squared dist":n.push([1])}return n}}class tt{constructor(t){this.inputs=[],this.outputs=[],this.func=t,this.size=null,this.network=null}clone(){var t=new tt(this.func);return t.inputs=[...this.inputs],t.outputs=[...this.outputs],t.network=this.network,t}}var et=Array.apply(null,Array(12)).map((function(){}));et[0]=new Z("abstraction",0),et[1]=new Z("identity",1),et[2]=new Z("add",2),et[3]=new Z("subtract",2),et[4]=new Z("scale",2),et[5]=new Z("Fully Connected",2),et[6]=new Z("amass",1),et[7]=new Z("Softmax",1),et[8]=new Z("hardmax",1),et[9]=new Z("max",1),et[10]=new Z("Convolution",2),et[11]=new Z("squared dist",2),et[12]=new Z("PReLU",1),et[13]=new Z("LeakyReLU",1),et[14]=new Z("Leaky to ReLU",1);const nt=10;function st(t,e,n){var s={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4},o=t.operators[e],r=!1;for(let t=0;t<o.outputs.length;t++)o.outputs[t]==n&&(r=!0);var i=0;if(!r)for(let t=0;t<o.inputs.length;t++)o.inputs[t]==n&&(i=t);var l=!1,a=!1,u=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:a=!0;break;case 4:case 5:case 10:u=!0;break;case 6:case 7:case 8:case 9:case 12:l=!0}var c=t.tensors[o.inputs[0]],p=t.tensors[o.inputs[1]],h=t.tensors[o.outputs[0]];if(l&&(r?s.x_min=c.x+40:s.x_max=h.x-40),u)if(r)s.x_min=p.x+20,s.y_min=p.y+20;else if(1==i){s.x_min=c.x+20,s.x_max=h.x-20;var f=Math.min(h.y,c.y);s.y_max=f-20}else s.x_max=p.x-20,s.y_min=p.y+20;if(a)if(r){var d=Math.max(c.x,p.x);s.x_min=d+40}else 1==i?(s.x_max=h.x-40,s.y_max=c.y-20):(s.x_max=h.x-40,s.y_min=p.y+20);return s}function ot(t,e,n,s,o=!1){t.tensors[e].x=n,t.tensors[e].y=s,o&&(t.tensors[e].x-=(t.tensors[e].x+nt)%20-nt,t.tensors[e].y-=(t.tensors[e].y+nt)%20-nt);var r={x_min:-9999,x_max:1e4,y_min:-9999,y_max:1e4};for(let n=0;n<t.tensors[e].input_to.length;n++){let s=st(t,t.tensors[e].input_to[n],e);r.x_min=Math.max(r.x_min,s.x_min),r.x_max=Math.min(r.x_max,s.x_max),r.y_min=Math.max(r.y_min,s.y_min),r.y_max=Math.min(r.y_max,s.y_max)}if(null!=t.tensors[e].output_of){let n=st(t,t.tensors[e].output_of,e);r.x_min=Math.max(r.x_min,n.x_min),r.x_max=Math.min(r.x_max,n.x_max),r.y_min=Math.max(r.y_min,n.y_min),r.y_max=Math.min(r.y_max,n.y_max)}t.tensors[e].x<r.x_min&&(t.tensors[e].x=r.x_min),t.tensors[e].x>r.x_max&&(t.tensors[e].x=r.x_max),t.tensors[e].y<r.y_min&&(t.tensors[e].y=r.y_min),t.tensors[e].y>r.y_max&&(t.tensors[e].y=r.y_max)}function rt(t,e,n){var s=[];for(let o=0;o<t.tensors.length;o++)t.tensors[o].x-nt<e&&t.tensors[o].x+nt>e&&t.tensors[o].y-nt<n&&t.tensors[o].y+nt>n&&s.push(o);return s}function it(t,e){var n=t.tensors[e],s=n.input_to;n.input_to=[];for(let a=0;a<s.length;a++){var o=s[a],r=t.operators[o],i=t.tensors.length;t.add_tensor(new V(!0));var l=r.inputs.findIndex((t=>t==e));r.inputs[l]=i,t.tensors[i].x=n.x+20,t.tensors[i].y=n.y,t.tensors[i].input_to=[o],t.tensors[i].output_of=null,t.tensors[i].live=!1}n.x-=20,n.live=!1}function lt(t,e,n){if(t.tensors[e].live&&t.tensors[n].live)return void console.log("Both merged tensors are live, so don't do anything.");let s=t.tensors[e],o=t.tensors[n],r=n,i=e;if(null!=s.output_of&&null==o.output_of);else{if(null==o.output_of||null!=s.output_of)return void console.log("Error merging, only one input must have an output");var l=o;o=s,s=l,r=e,i=n}if(console.log(s.output_of,o.input_to),s.output_of==o.input_to)return void console.log("Error merging, these are input and output of the same function");let a=t.operators[o.input_to].inputs.indexOf(r);t.operators[o.input_to].inputs[a]=i,s.input_to=o.input_to,s.live=s.live||o.live,t.tensors[i].selected=!0,function(t,e){for(let n=0;n<t.operators.length;n++){for(let s=0;s<t.operators[n].inputs.length;s++)t.operators[n].inputs[s]>e&&(t.operators[n].inputs[s]-=1);for(let s=0;s<t.operators[n].outputs.length;s++)t.operators[n].outputs[s]>e&&(t.operators[n].outputs[s]-=1)}t.tensors.splice(e,1)}(t,r)}var at=0,ut=0,ct=0,pt=0;const ht=10;var ft=!1,dt=-1,xt=-1,mt=0,gt=0,yt=0,vt=0,_t=[],bt=!1,$t=!0;function wt(t,e=40,n=60){Lt();var s=!1,o=!1,r=!1;switch(t){case 0:case 1:break;case 2:case 4:case 11:o=!0;break;case 4:case 5:case 10:r=!0;break;case 6:case 7:case 8:case 9:case 12:s=!0}let i=new tt;i.func=t;var l=_t[0].tensors.length;s&&(_t[0].add_tensor(new V(!1)),_t[0].tensors[l+0].x=e+0,_t[0].tensors[l+0].y=n+0,_t[0].add_tensor(new V(!1)),_t[0].tensors[l+1].x=e+60,_t[0].tensors[l+1].y=n+0,i.inputs=[l+0],i.outputs=[l+1]),r&&(_t[0].add_tensor(new V(!1)),_t[0].tensors[l+0].x=e+0,_t[0].tensors[l+0].y=n+40,_t[0].add_tensor(new V(!1)),_t[0].tensors[l+1].x=e+40,_t[0].tensors[l+1].y=n+0,_t[0].add_tensor(new V(!1)),_t[0].tensors[l+2].x=e+80,_t[0].tensors[l+2].y=n+40,i.inputs=[l+0,l+1],i.outputs=[l+2]),o&&(_t[0].add_tensor(new V(!1)),_t[0].tensors[l+0].x=e+0,_t[0].tensors[l+0].y=n+40,_t[0].add_tensor(new V(!1)),_t[0].tensors[l+1].x=e+0,_t[0].tensors[l+1].y=n+0,_t[0].add_tensor(new V(!1)),_t[0].tensors[l+2].x=e+60,_t[0].tensors[l+2].y=n+20,i.inputs=[l+0,l+1],i.outputs=[l+2]),_t[0].add_operator(i)}CanvasRenderingContext2D.prototype.roundRect=function(t,e,n,s,o){return n<0&&(t-=n=-n),s<0&&(e-=s=-s),n<2*o&&(o=n/2),s<2*o&&(o=s/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+n,e,t+n,e+s,o),this.arcTo(t+n,e+s,t,e+s,o),this.arcTo(t,e+s,t,e,o),this.arcTo(t,e,t+n,e,o),this.closePath(),this},_t.push(new K);var kt=[],Tt=new class{constructor(t,e,n,s,o=!1){this.x=t,this.y=e,this.w=n,this.h=s,this.bool=o}press(t,e){this.x<=t&&this.x+this.w>=t&&this.y<=e&&this.y+this.h>=e&&(this.bool=!this.bool)}}(10,10,40,40,!0);function Ct(t,e){let n=t.tensors[e];n.live?(ut.fillStyle="white",ut.lineWidth=1,ut.setLineDash([]),ut.strokeStyle="black"):(ut.fillStyle="rgba(255,255,255,0)",ut.lineWidth=1,ut.setLineDash([3,4]),ut.strokeStyle="Grey"),ut.beginPath(),n.scalar?ut.rect(n.x-5,n.y-5,10,10):ut.rect(n.x-ht,n.y-ht,20,20),ut.fill(),ut.stroke(),n.selected&&(ut.fillStyle="rgba(255,255,255,0)",ut.lineWidth=1,ut.strokeStyle="#5dd2f0",ut.setLineDash([]),ut.beginPath(),ut.roundRect(n.x-15,n.y-15,30,30,2),ut.stroke())}function jt(t,e){let n,s,o,r,i=t.operators[e],l=ut.createLinearGradient(0,0,ct,pt);l.addColorStop(0,"#DE7521"),l.addColorStop(1,"#218ADE"),ut.fillStyle=l;switch(i.func){case 0:case 1:case 4:case 6:case 8:case 9:case 11:break;case 2:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],ut.beginPath(),ut.moveTo(r.x-ht,r.y-ht),ut.lineTo(r.x-ht,r.y+ht),ut.lineTo(s.x+ht,s.y+ht),ut.lineTo(s.x+ht,s.y-ht),ut.closePath(),ut.fill(),ut.beginPath(),ut.moveTo(r.x-ht,r.y-ht),ut.lineTo(r.x-ht,r.y+ht),ut.lineTo(o.x+ht,o.y+ht),ut.lineTo(o.x+ht,o.y-ht),ut.closePath(),ut.fill();break;case 3:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]];break;case 5:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],ut.beginPath(),ut.moveTo(r.x-ht,r.y-ht),ut.lineTo(r.x-ht,r.y+ht),ut.lineTo(s.x+ht,s.y+ht),ut.lineTo(s.x+ht,s.y-ht),ut.lineTo(o.x-ht,o.y+ht),ut.lineTo(o.x+ht,o.y+ht),ut.closePath(),ut.fill();break;case 7:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],ut.beginPath(),ut.moveTo(r.x-ht,r.y-5),ut.lineTo(r.x-ht,r.y+5),ut.lineTo(n.x+ht,n.y+ht),ut.lineTo(n.x+ht,n.y-ht),ut.closePath(),ut.fill();break;case 10:s=t.tensors[i.inputs[0]],o=t.tensors[i.inputs[1]],r=t.tensors[i.outputs[0]],ut.beginPath(),ut.moveTo(s.x+ht,s.y-ht+4),ut.lineTo(s.x+ht,s.y-ht),ut.lineTo(o.x-ht,o.y+ht),ut.lineTo(o.x+ht,o.y+ht),ut.lineTo(r.x-ht,r.y-ht),ut.lineTo(r.x-ht,r.y-ht+4);for(let t=1;t<5;t+=2)ut.lineTo(s.x+ht,s.y-ht+4*t),ut.lineTo(s.x+ht,s.y-ht+4*(t+1)),ut.lineTo(r.x-ht,r.y-ht+4*(t+1)),ut.lineTo(r.x-ht,r.y-ht+4*(t+2));ut.lineTo(s.x+ht,s.y+ht),ut.closePath(),ut.fill();break;case 12:n=t.tensors[i.inputs[0]],r=t.tensors[i.outputs[0]],ut.beginPath(),ut.moveTo(n.x+ht,n.y+ht),ut.lineTo(n.x+ht,n.y-ht),ut.lineTo(r.x-ht,r.y-ht),ut.lineTo(r.x-ht,r.y-ht+4);for(let t=1;t<5;t+=2)ut.lineTo((r.x+n.x)/2,(r.y+n.y)/2-ht+4*t),ut.lineTo((r.x+n.x)/2,(r.y+n.y)/2-ht+4*(t+1)),ut.lineTo(r.x-ht,r.y-ht+4*(t+1)),ut.lineTo(r.x-ht,r.y-ht+4*(t+2));ut.closePath(),ut.fill();break;default:console.log("Invalid operator types")}}function qt(){if(at.width=at.getBoundingClientRect().width,at.height=at.getBoundingClientRect().height,ct=at.width,pt=at.height,$t){ut.beginPath();for(let t=-10;t<ct;t+=20)ut.moveTo(t,0),ut.lineTo(t,pt);for(let t=-10;t<pt;t+=20)ut.moveTo(0,t),ut.lineTo(ct,t);ut.lineWidth=.5,ut.setLineDash([1,4]),ut.strokeStyle="Grey",ut.closePath(),ut.stroke()}for(let t=0;t<_t[0].operators.length;t++)jt(_t[0],t);for(let t=0;t<_t[0].tensors.length;t++)Ct(_t[0],t),_t[0].tensors[t].selected&&!bt&&ft&&ot(_t[0],t,_t[0].tensors[t].tx+mt-yt,_t[0].tensors[t].ty+gt-vt,$t);bt&&(ut.fillStyle="rgba(255,255,255,0)",ut.lineWidth=1,ut.strokeStyle="#5dd2f0",ut.setLineDash([3,2]),ut.beginPath(),ut.roundRect(yt,vt,mt-yt,gt-vt,2),ut.stroke()),$t=kt[0].bool,ut.fillStyle="black",ut.fillRect(kt[0].x,kt[0].y,kt[0].w,kt[0].h),window.requestAnimationFrame(qt)}function Lt(){for(let t=0;t<_t[0].tensors.length;t++)_t[0].tensors[t].selected=!1}function Pt(t){let e=rt(_t[0],mt,gt);console.log("Clicked Indices ",e);for(let t=0;t<e.length;t++){var n=e[t],s=_t[0].tensors[n];null==s.output_of||0==s.input_to.length?s.live=!s.live:(console.log("Unmerge"),it(_t[0],n))}}function Mt(t){bt=!1;for(let t=0;t<_t[0].tensors.length;t++)for(let s=0;s<_t[0].tensors.length;s++)if(s!=t){var e=_t[0].tensors[t],n=_t[0].tensors[s];Math.abs(e.x-n.x)<20&&Math.abs(e.y-n.y)<20&&lt(_t[0],t,s)}ft=!1,dt=-1,xt=-1;let s=rt(_t[0],mt,gt);s.length>=2&&lt(_t[0],s[0],s[1])}function St(t){ft=!0;for(let t=0;t<_t[0].tensors.length;t++)_t[0].tensors[t].tx=_t[0].tensors[t].x,_t[0].tensors[t].ty=_t[0].tensors[t].y;yt=mt,vt=gt;let e=rt(_t[0],mt,gt);0!=e.length&&(dt=e[0],_t[0].tensors[dt].selected||Lt(),_t[0].tensors[dt].selected=!0);let n=function(t,e,n){var s=[];for(let x=0;x<t.operators.length;x++){var o=t.operators[x],r=!1,i=!1,l=!1;switch(o.func){case 0:case 1:break;case 2:case 4:case 11:i=!0;break;case 4:case 5:case 10:l=!0;break;case 6:case 7:case 8:case 9:case 12:r=!0}var a=t.tensors[o.inputs[0]],u=t.tensors[o.inputs[1]],c=t.tensors[o.outputs[0]],p=1e6,h=-1e6,f=1e6,d=-1e6;r&&(p=a.x+nt,h=c.x-nt,f=Math.min(a.y-nt,c.y-nt),d=Math.max(a.y+nt,c.y+nt)),l&&(p=a.x+nt,h=c.x-nt,f=u.y+nt,d=Math.max(a.y+nt,c.y+nt)),i&&(p=Math.min(a.x+nt,u.x+nt),h=c.x-nt,f=u.y-nt,d=a.y+nt),p<e&&h>e&&f<n&&d>n&&s.push(x)}return s}(_t[0],mt,gt);if(0!=n.length&&0==e.length){xt=n[0];var s=_t[0].operators[xt];for(let t=0;t<s.inputs.length;t++)_t[0].tensors[s.inputs[t]].selected=!0;for(let t=0;t<s.outputs.length;t++)_t[0].tensors[s.outputs[t]].selected=!0}0==e.length&&0==n.length&&(bt=!0,Lt());for(let t=0;t<kt.length;t++)kt[t].press(mt,gt)}function Et(t){if(t.offsetX?(mt=t.offsetX,gt=t.offsetY):t.layerX&&(mt=t.layerX,gt=t.layerY),bt)for(let t=0;t<_t[0].tensors.length;t++){var e=_t[0].tensors[t];Math.abs(e.x-(yt+mt)/2)<Math.abs(yt-(yt+mt)/2)&&Math.abs(e.y-(vt+gt)/2)<Math.abs(vt-(vt+gt)/2)?e.selected=!0:e.selected=!1}}function At(t,e,n){const s=t.slice();return s[29]=e[n],s}function Rt(t){let e,n,s,o,r,i,l,u,d=t[29].operator_type+"";return{c(){e=f("li"),n=f("p"),s=f("img"),r=x(d),i=m(),a(s.src,o=It)||y(s,"src",o),y(s,"alt","List icon."),_(s,"max-height","20px"),_(s,"margin-right","5px"),y(e,"id","list_item"),y(e,"class","svelte-j2qlb6")},m(o,a){p(o,e,a),c(e,n),c(n,s),c(n,r),c(e,i),l||(u=g(e,"click",t[16]),l=!0)},p(t,e){1&e[0]&&d!==(d=t[29].operator_type+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(r,d)},d(t){t&&h(e),l=!1,u()}}}function Ot(e){let n,o,r,i,l,a;return{c(){n=x("Are you sure?\n\t\t\n\t\t"),o=f("button"),o.textContent="Yes",r=m(),i=f("button"),i.textContent="No",y(o,"class","option"),y(i,"class","option")},m(t,s){p(t,n,s),p(t,o,s),p(t,r,s),p(t,i,s),l||(a=[g(o,"click",e[4]),g(i,"click",e[18])],l=!0)},p:t,d(t){t&&h(n),t&&h(o),t&&h(r),t&&h(i),l=!1,s(a)}}}function Dt(e){let n,o,r,i,l,a,u,c,d;return{c(){n=x("How would you like to download your neural network? "),o=f("br"),r=f("br"),i=m(),l=f("button"),l.textContent="Pytorch",a=m(),u=f("button"),u.textContent="Tensorflow",y(l,"class","option"),y(u,"class","option")},m(t,s){p(t,n,s),p(t,o,s),p(t,r,s),p(t,i,s),p(t,l,s),p(t,a,s),p(t,u,s),c||(d=[g(l,"click",e[19]),g(u,"click",e[20])],c=!0)},p:t,d(t){t&&h(n),t&&h(o),t&&h(r),t&&h(i),t&&h(l),t&&h(a),t&&h(u),c=!1,s(d)}}}function Ft(t){let e;return{c(){e=f("h1"),e.textContent="Tutorial"},m(t,n){p(t,e,n)},d(t){t&&h(e)}}}function Ut(t){let e,n,s;return{c(){e=f("h1"),e.textContent="About Neurula",n=m(),s=f("p"),s.innerHTML="Machine learning can appear obscure and complicated, posing a barrier to people who are unfamiliar but interested.<br/>\n\t\t\tHowever, designing working neural networks doesnâ€™t have to be difficult.<br/><br/>\n\t\t\tThat&#39;s why we created Neurula: a website in which you can drag and drop blocks allowing you to design\n\t\t\tneural networks in an intuitive fashion. Once you design a network, you can download auto-generated code that implements\n\t\t\tthat network in tensorflow or pytorch. <br/><br/> \n\t\t\t<i>Made for UCSC&#39;s CSE 115A Spring 2022</i><br/> \n\t\t\t<i>Developers: Nicolas Ayala, Anish Pahilajani, Kat Negrete, Mahesh Vegiraju, and Alexandra Hutchins</i>"},m(t,o){p(t,e,o),p(t,n,o),p(t,s,o)},d(t){t&&h(e),t&&h(n),t&&h(s)}}}function Nt(e){let n,o,r,i,l,a,u,c,d,v,_,b,$;return{c(){n=x("Add Operator: "),o=f("br"),r=f("br"),i=m(),l=f("button"),l.textContent="Dense",a=m(),u=f("button"),u.textContent="Convolutional",c=m(),d=f("button"),d.textContent="PReLU",v=m(),_=f("button"),_.textContent="Softmax",y(l,"class","option"),y(u,"class","option"),y(d,"class","option"),y(_,"class","option")},m(t,s){p(t,n,s),p(t,o,s),p(t,r,s),p(t,i,s),p(t,l,s),p(t,a,s),p(t,u,s),p(t,c,s),p(t,d,s),p(t,v,s),p(t,_,s),b||($=[g(l,"click",e[5]),g(u,"click",e[6]),g(d,"click",e[7]),g(_,"click",e[8])],b=!0)},p:t,d(t){t&&h(n),t&&h(o),t&&h(r),t&&h(i),t&&h(l),t&&h(a),t&&h(u),t&&h(c),t&&h(d),t&&h(v),t&&h(_),b=!1,s($)}}}function Bt(t){let e,n,o,r,i,l,a,u,d,_,b,$,w,k,T,C,j,q,L,P;return{c(){e=x("Edit Operator: "),n=f("br"),o=f("br"),r=m(),i=f("form"),l=f("label"),l.textContent="Input:",a=m(),u=f("input"),d=f("br"),_=m(),b=f("label"),b.textContent="Output:",$=m(),w=f("input"),k=f("br"),T=m(),C=f("label"),C.textContent="Parameter Shape:",j=m(),q=f("input"),y(l,"for","name"),y(u,"id","name"),y(u,"type","text"),y(b,"for","name"),y(w,"id","name"),y(w,"type","text"),y(C,"for","name"),y(q,"id","name"),y(q,"type","text")},m(s,h){var f;p(s,e,h),p(s,n,h),p(s,o,h),p(s,r,h),p(s,i,h),c(i,l),c(i,a),c(i,u),v(u,t[1]),c(i,d),c(i,_),c(i,b),c(i,$),c(i,w),v(w,t[2]),c(i,k),c(i,T),c(i,C),c(i,j),c(i,q),v(q,t[3]),L||(P=[g(u,"input",t[21]),g(w,"input",t[22]),g(q,"input",t[23]),g(i,"submit",(f=t[9],function(t){return t.preventDefault(),f.call(this,t)}))],L=!0)},p(t,e){2&e[0]&&u.value!==t[1]&&v(u,t[1]),4&e[0]&&w.value!==t[2]&&v(w,t[2]),8&e[0]&&q.value!==t[3]&&v(q,t[3])},d(t){t&&h(e),t&&h(n),t&&h(o),t&&h(r),t&&h(i),L=!1,s(P)}}}function Gt(t){let e,n,o,r,i,l,u,d,v,b,$,w,k,T,C,j,q,L,P,M,S,E,A,R,O,G,W,z,I,H,Y,X,J,K,V,Z,tt,et,nt,st,ot,rt,it,lt,at,ut,ct,pt,ht,ft,dt,xt,mt,gt,yt,vt,_t,bt,$t,wt,kt,Tt,Ct,jt=t[0],qt=[];for(let e=0;e<jt.length;e+=1)qt[e]=Rt(At(t,jt,e));return ft=new Q({props:{id:"clear",$$slots:{default:[Ot]},$$scope:{ctx:t}}}),xt=new Q({props:{id:"generate",$$slots:{default:[Dt]},$$scope:{ctx:t}}}),gt=new Q({props:{id:"tutorial",$$slots:{default:[Ft]},$$scope:{ctx:t}}}),vt=new Q({props:{id:"about",$$slots:{default:[Ut]},$$scope:{ctx:t}}}),bt=new Q({props:{id:"add_operator",$$slots:{default:[Nt]},$$scope:{ctx:t}}}),wt=new Q({props:{id:"edit_operator",$$slots:{default:[Bt]},$$scope:{ctx:t}}}),{c(){e=f("main"),n=f("nav"),o=f("div"),r=f("ul"),i=f("li"),l=f("a"),u=f("img"),v=m(),b=f("div"),$=f("ul"),w=f("li"),k=f("a"),T=x("Clear Canvas"),C=m(),j=f("li"),q=f("a"),L=x("Generate Code"),P=m(),M=f("li"),S=f("a"),E=x("?"),A=m(),R=f("div"),O=f("div"),G=f("div"),W=f("a"),z=x("+ add operator"),I=m(),H=f("div"),Y=f("div"),X=m();for(let t=0;t<qt.length;t+=1)qt[t].c();J=m(),K=f("div"),K.innerHTML='<canvas id="gui_canvas" class="svelte-j2qlb6"></canvas>',V=m(),Z=f("div"),tt=f("a"),et=x("About"),nt=m(),st=f("a"),ot=f("img"),it=x("Github"),lt=m(),at=f("a"),ut=f("img"),pt=x("Feedback"),ht=m(),U(ft.$$.fragment),dt=m(),U(xt.$$.fragment),mt=m(),U(gt.$$.fragment),yt=m(),U(vt.$$.fragment),_t=m(),U(bt.$$.fragment),$t=m(),U(wt.$$.fragment),a(u.src,d=Wt)||y(u,"src",d),y(u,"alt","Neurula logo."),_(u,"max-height","60px"),y(l,"href",zt),y(l,"class","svelte-j2qlb6"),y(i,"class","svelte-j2qlb6"),y(r,"class","navbar-list svelte-j2qlb6"),y(o,"class","left svelte-j2qlb6"),y(k,"href",void 0),y(k,"class","nav-button svelte-j2qlb6"),y(w,"class","svelte-j2qlb6"),y(q,"href",void 0),y(q,"class","nav-button svelte-j2qlb6"),y(j,"class","svelte-j2qlb6"),y(S,"href",void 0),y(S,"class","nav-button svelte-j2qlb6"),y(M,"class","svelte-j2qlb6"),y($,"class","navbar-list svelte-j2qlb6"),y(b,"class","right svelte-j2qlb6"),y(n,"class","svelte-j2qlb6"),y(W,"href",void 0),y(W,"class","nav-button svelte-j2qlb6"),y(G,"id","toolbar_title"),y(G,"class","svelte-j2qlb6"),y(Y,"id","toolbar_add_operator"),y(Y,"class","svelte-j2qlb6"),y(H,"id","toolbar_list"),y(H,"class","svelte-j2qlb6"),y(O,"id","toolbar"),y(O,"class","svelte-j2qlb6"),y(K,"id","canvas_container"),y(K,"class","svelte-j2qlb6"),y(R,"id","workspace"),y(R,"class","svelte-j2qlb6"),y(tt,"href",void 0),y(tt,"class","footer-button svelte-j2qlb6"),y(ot,"id","git"),a(ot.src,rt=Ht)||y(ot,"src",rt),y(ot,"alt","Github logo."),_(ot,"max-height","20px"),y(ot,"class","svelte-j2qlb6"),y(st,"href",Xt),y(st,"class","svelte-j2qlb6"),y(ut,"id","git"),a(ut.src,ct=Yt)||y(ut,"src",ct),y(ut,"alt","Google Forms logo."),_(ut,"max-height","20px"),y(ut,"class","svelte-j2qlb6"),y(at,"href",Jt),y(at,"class","svelte-j2qlb6"),y(Z,"class","footer svelte-j2qlb6"),y(e,"class","svelte-j2qlb6")},m(s,a){p(s,e,a),c(e,n),c(n,o),c(o,r),c(r,i),c(i,l),c(l,u),c(n,v),c(n,b),c(b,$),c($,w),c(w,k),c(k,T),c($,C),c($,j),c(j,q),c(q,L),c($,P),c($,M),c(M,S),c(S,E),c(e,A),c(e,R),c(R,O),c(O,G),c(G,W),c(W,z),c(O,I),c(O,H),c(H,Y),c(H,X);for(let t=0;t<qt.length;t+=1)qt[t].m(H,null);c(R,J),c(R,K),c(e,V),c(e,Z),c(Z,tt),c(tt,et),c(Z,nt),c(Z,st),c(st,ot),c(st,it),c(Z,lt),c(Z,at),c(at,ut),c(at,pt),c(e,ht),N(ft,e,null),c(e,dt),N(xt,e,null),c(e,mt),N(gt,e,null),c(e,yt),N(vt,e,null),c(e,_t),N(bt,e,null),c(e,$t),N(wt,e,null),kt=!0,Tt||(Ct=[g(k,"click",t[12]),g(q,"click",t[13]),g(S,"click",t[14]),g(W,"click",t[15]),g(tt,"click",t[17])],Tt=!0)},p(t,e){if(1&e[0]){let n;for(jt=t[0],n=0;n<jt.length;n+=1){const s=At(t,jt,n);qt[n]?qt[n].p(s,e):(qt[n]=Rt(s),qt[n].c(),qt[n].m(H,null))}for(;n<qt.length;n+=1)qt[n].d(1);qt.length=jt.length}const n={};2&e[1]&&(n.$$scope={dirty:e,ctx:t}),ft.$set(n);const s={};2&e[1]&&(s.$$scope={dirty:e,ctx:t}),xt.$set(s);const o={};2&e[1]&&(o.$$scope={dirty:e,ctx:t}),gt.$set(o);const r={};2&e[1]&&(r.$$scope={dirty:e,ctx:t}),vt.$set(r);const i={};2&e[1]&&(i.$$scope={dirty:e,ctx:t}),bt.$set(i);const l={};14&e[0]|2&e[1]&&(l.$$scope={dirty:e,ctx:t}),wt.$set(l)},i(t){kt||(D(ft.$$.fragment,t),D(xt.$$.fragment,t),D(gt.$$.fragment,t),D(vt.$$.fragment,t),D(bt.$$.fragment,t),D(wt.$$.fragment,t),kt=!0)},o(t){F(ft.$$.fragment,t),F(xt.$$.fragment,t),F(gt.$$.fragment,t),F(vt.$$.fragment,t),F(bt.$$.fragment,t),F(wt.$$.fragment,t),kt=!1},d(t){t&&h(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(qt,t),B(ft),B(xt),B(gt),B(vt),B(bt),B(wt),Tt=!1,s(Ct)}}}kt.push(Tt);let Wt="./transparent_bar_logo.png",zt="http://127.0.0.1:8000",It="https://cdn-icons-png.flaticon.com/512/2103/2103633.png",Ht="https://cdn-icons-png.flaticon.com/512/25/25231.png",Yt="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Google_Forms_logo_%282014-2020%29.svg/640px-Google_Forms_logo_%282014-2020%29.svg.png",Xt="https://github.com/genicos/nn_gui",Jt="https://docs.google.com/forms/d/e/1FAIpQLSdMQYYT9P0cp507dm4xyCr9cvJJ9RUwAcFF21pWBhWLWyqPng/viewform?usp=sf_link";function Qt(t,e,n){var s;s=()=>{(at=document.getElementById("gui_canvas")).addEventListener("mousedown",St,!1),at.addEventListener("mousemove",Et,!1),at.addEventListener("mouseup",Mt,!1),at.addEventListener("dblclick",Pt,!1),ut=at.getContext("2d"),at.width=at.getBoundingClientRect().width,at.height=at.getBoundingClientRect().height,ct=at.width,pt=at.height,window.requestAnimationFrame(qt)},w().$$.on_mount.push(s);var o=[];function r(){var t=_t[0].operators.map((t=>et[t.func].name)),e=[];if(0!=t.length){e.push(t[0]);for(let n=1;n<t.length;n++){var s=0;for(let e=0;e<n;e++)t[n]==t[e]&&s++;var r=t[n];s>0&&(r+=" "+String(s+1)),e.push(r)}for(let t=0;t<e.length;t++)n(0,o[t]={operator_type:e[t],id:String(t)},o)}}let i,l,a,u=[{id:1,name:"Dense"},{id:2,name:"Convolutional"},{id:3,name:"PReLU"},{id:4,name:"Softmax"}],c="";function p(t){}function h(t){}return[o,i,l,a,function(){Y("clear").close(1),_t[0]=new K},function(){wt(5),Y("add_operator").close(1),r()},function(){wt(10),Y("add_operator").close(1),r()},function(){wt(12),Y("add_operator").close(1),r()},function(){wt(7),Y("add_operator").close(1),r()},()=>{u=[...u,{id:Math.random(),operator_type:c}],c=""},p,h,()=>Y("clear").open(p),()=>Y("generate").open(h),()=>Y("tutorial").open(),()=>Y("add_operator").open(),()=>Y("edit_operator").open(),()=>Y("about").open(),()=>Y("clear").close(0),()=>Y("generate").close(1),()=>Y("generate").close(2),function(){i=this.value,n(1,i)},function(){l=this.value,n(2,l)},function(){a=this.value,n(3,a)}]}return new class extends z{constructor(t){super(),W(this,t,Qt,Gt,r,{},null,[-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
